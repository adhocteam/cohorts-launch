var $jscomp={scope:{},getGlobal:function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return"jscomp_symbol_"+b+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();if(b[$jscomp.global.Symbol.iterator])return b[$jscomp.global.Symbol.iterator]();var a=0;return{next:function(){return a==b.length?{done:!0}:{done:!1,value:b[a++]}}}};
$jscomp.arrayFromIterator=function(b){for(var a,d=[];!(a=b.next()).done;)d.push(a.value);return d};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.inherits=function(b,a){function d(){}d.prototype=a.prototype;b.prototype=new d;b.prototype.constructor=b;for(var c in a)if($jscomp.global.Object.defineProperties){var f=$jscomp.global.Object.getOwnPropertyDescriptor(a,c);f&&$jscomp.global.Object.defineProperty(b,c,f)}else b[c]=a[c]};$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};
$jscomp.array.arrayIterator_=function(b,a){b instanceof String&&(b=String(b));var d=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var c={},f=(c.next=function(){if(d<b.length){var c=d++;return{value:a(c,b[c]),done:!1}}f.next=$jscomp.array.done_;return $jscomp.array.done_()},c[Symbol.iterator]=function(){return f},c);return f};
$jscomp.array.findInternal_=function(b,a,d){b instanceof String&&(b=String(b));for(var c=b.length,f=0;f<c;f++){var g=b[f];if(a.call(d,g,f,b))return{i:f,v:g}}return{i:-1,v:void 0}};
$jscomp.array.from=function(b,a,d){a=void 0===a?function(a){return a}:a;var c=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(b[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();b=b[Symbol.iterator]();for(var f;!(f=b.next()).done;)c.push(a.call(d,f.value))}else{f=b.length;for(var g=0;g<f;g++)c.push(a.call(d,b[g]))}return c};$jscomp.array.of=function(b){for(var a=[],d=0;d<arguments.length;++d)a[d-0]=arguments[d];return $jscomp.array.from(a)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(b,a){return[b,a]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(b){return b})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(b,a){return a})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(b,a,d){var c=this.length;b=Number(b);a=Number(a);d=Number(null!=d?d:c);if(b<a)for(d=Math.min(d,c);a<d;)a in this?this[b++]=this[a++]:(delete this[b++],a++);else for(d=Math.min(d,c+a-b),b+=d-a;d>a;)--d in this?this[--b]=this[d]:delete this[b];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(b,a,d){null!=d&&b.length||(d=this.length||0);d=Number(d);for(a=Number((void 0===a?0:a)||0);a<d;a++)this[a]=b;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(b,a){return $jscomp.array.findInternal_(this,b,a).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(b,a){return $jscomp.array.findInternal_(this,b,a).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(b){b=void 0===b?[]:b;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var a=b.next();!a.done;a=b.next())a=a.value,this.set(a[0],a[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var b=$jscomp.global.Map;if(!b||!b.prototype.entries||!Object.seal)return!1;try{var a=Object.seal({x:4}),d=new b($jscomp.makeIterator([[a,"s"]]));if("s"!=d.get(a)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var c=d.entries(),f=c.next();if(f.done||f.value[0]!=a||"s"!=f.value[1])return!1;f=c.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!c.next().done?!1:!0}catch(g){return!1}};
$jscomp.Map.createHead_=function(){var b={};return b.previous=b.next=b.head=b};$jscomp.Map.getId_=function(b){if(!(b instanceof Object))return String(b);$jscomp.Map.key_ in b||b instanceof Object&&Object.isExtensible&&Object.isExtensible(b)&&$jscomp.Map.defineProperty_(b,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in b?b[$jscomp.Map.key_]:" "+b};
$jscomp.Map.prototype.set=function(b,a){var d=this.maybeGetEntry_(b),c=d.id,f=d.list,d=d.entry;f||(f=this.data_[c]=[]);d?d.value=a:(d={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,value:a},f.push(d),this.head_.previous.next=d,this.head_.previous=d,this.size++);return this};
$jscomp.Map.prototype.delete=function(b){var a=this.maybeGetEntry_(b);b=a.id;var d=a.list,c=a.index;return(a=a.entry)&&d?(d.splice(c,1),d.length||delete this.data_[b],a.previous.next=a.next,a.next.previous=a.previous,a.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(b){return!!this.maybeGetEntry_(b).entry};
$jscomp.Map.prototype.get=function(b){return(b=this.maybeGetEntry_(b).entry)&&b.value};$jscomp.Map.prototype.maybeGetEntry_=function(b){var a=$jscomp.Map.getId_(b),d=this.data_[a];if(d)for(var c=0;c<d.length;c++){var f=d[c];if(b!==b&&f.key!==f.key||b===f.key)return{id:a,list:d,index:c,entry:f}}return{id:a,list:d,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(b){return[b.key,b.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(b){return b.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(b){return b.value})};$jscomp.Map.prototype.forEach=function(b,a){for(var d=$jscomp.makeIterator(this.entries()),c=d.next();!c.done;c=d.next())c=c.value,b.call(a,c[1],c[0],this)};
$jscomp.Map.prototype.iter_=function(b){var a=this,d=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var c={};return c.next=function(){if(d){for(;d.head!=a.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:b(d)};d=null}return{done:!0,value:void 0}},c[Symbol.iterator]=function(){return this},c};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(b,a,d){Object.defineProperty(b,a,{value:String(d)})}:function(b,a,d){b[a]=String(d)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(b){b=Number(b)>>>0;if(0===b)return 32;var a=0;0===(b&4294901760)&&(b<<=16,a+=16);0===(b&4278190080)&&(b<<=8,a+=8);0===(b&4026531840)&&(b<<=4,a+=4);0===(b&3221225472)&&(b<<=2,a+=2);0===(b&2147483648)&&a++;return a};$jscomp.math.imul=function(b,a){b=Number(b);a=Number(a);var d=b&65535,c=a&65535;return d*c+((b>>>16&65535)*c+d*(a>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(b){b=Number(b);return 0===b||isNaN(b)?b:0<b?1:-1};
$jscomp.math.log10=function(b){return Math.log(b)/Math.LN10};$jscomp.math.log2=function(b){return Math.log(b)/Math.LN2};$jscomp.math.log1p=function(b){b=Number(b);if(.25>b&&-.25<b){for(var a=b,d=1,c=b,f=0,g=1;f!=c;)a*=b,g*=-1,c=(f=c)+g*a/++d;return c}return Math.log(1+b)};$jscomp.math.expm1=function(b){b=Number(b);if(.25>b&&-.25<b){for(var a=b,d=1,c=b,f=0;f!=c;)a*=b/++d,c=(f=c)+a;return c}return Math.exp(b)-1};$jscomp.math.cosh=function(b){b=Number(b);return(Math.exp(b)+Math.exp(-b))/2};
$jscomp.math.sinh=function(b){b=Number(b);return 0===b?b:(Math.exp(b)-Math.exp(-b))/2};$jscomp.math.tanh=function(b){b=Number(b);if(0===b)return b;var a=Math.exp(2*-Math.abs(b)),a=(1-a)/(1+a);return 0>b?-a:a};$jscomp.math.acosh=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};$jscomp.math.asinh=function(b){b=Number(b);if(0===b)return b;var a=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return 0>b?-a:a};
$jscomp.math.atanh=function(b){b=Number(b);return($jscomp.math.log1p(b)-$jscomp.math.log1p(-b))/2};
$jscomp.math.hypot=function(b,a,d){for(var c=[],f=2;f<arguments.length;++f)c[f-2]=arguments[f];b=Number(b);a=Number(a);for(var g=Math.max(Math.abs(b),Math.abs(a)),h=$jscomp.makeIterator(c),f=h.next();!f.done;f=h.next())g=Math.max(g,Math.abs(f.value));if(1E100<g||1E-100>g){b/=g;a/=g;h=b*b+a*a;c=$jscomp.makeIterator(c);for(f=c.next();!f.done;f=c.next())f=f.value,f=Number(f)/g,h+=f*f;return Math.sqrt(h)*g}g=b*b+a*a;c=$jscomp.makeIterator(c);for(f=c.next();!f.done;f=c.next())f=f.value,f=Number(f),g+=
f*f;return Math.sqrt(g)};$jscomp.math.trunc=function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var a=Math.floor(Math.abs(b));return 0>b?-a:a};$jscomp.math.cbrt=function(b){if(0===b)return b;b=Number(b);var a=Math.pow(Math.abs(b),1/3);return 0>b?-a:a};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(b){return"number"!==typeof b?!1:!isNaN(b)&&Infinity!==b&&-Infinity!==b};
$jscomp.number.isInteger=function(b){return $jscomp.number.isFinite(b)?b===Math.floor(b):!1};$jscomp.number.isNaN=function(b){return"number"===typeof b&&isNaN(b)};$jscomp.number.isSafeInteger=function(b){return $jscomp.number.isInteger(b)&&Math.abs(b)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(b,a){for(var d=[],c=1;c<arguments.length;++c)d[c-1]=arguments[c];d=$jscomp.makeIterator(d);for(c=d.next();!c.done;c=d.next())if(c=c.value)for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(b[f]=c[f]);return b};$jscomp.object.is=function(b,a){return b===a?0!==b||1/b===1/a:b!==b&&a!==a};$jscomp.Set=function(b){b=void 0===b?[]:b;this.map_=new $jscomp.Map;if(b){b=$jscomp.makeIterator(b);for(var a=b.next();!a.done;a=b.next())this.add(a.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var b=$jscomp.global.Set;if(!b||!b.prototype.entries||!Object.seal)return!1;var a=Object.seal({x:4}),b=new b($jscomp.makeIterator([a]));if(b.has(a)||1!=b.size||b.add(a)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var b=b.entries(),d=b.next();if(d.done||d.value[0]!=a||d.value[1]!=a)return!1;d=b.next();return d.done||d.value[0]==a||4!=d.value[0].x||d.value[1]!=d.value[0]?!1:b.next().done};
$jscomp.Set.prototype.add=function(b){this.map_.set(b,b);this.size=this.map_.size;return this};$jscomp.Set.prototype.delete=function(b){b=this.map_.delete(b);this.size=this.map_.size;return b};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(b){return this.map_.has(b)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(b,a){var d=this;this.map_.forEach(function(c){return b.call(a,c,c,d)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(b,a){if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+a+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(b){for(var a=[],d=0;d<arguments.length;++d)a[d-0]=arguments[d];for(var d="",a=$jscomp.makeIterator(a),c=a.next();!c.done;c=a.next()){c=c.value;c=+c;if(0>c||1114111<c||c!==Math.floor(c))throw new RangeError("invalid_code_point "+c);65535>=c?d+=String.fromCharCode(c):(c-=65536,d+=String.fromCharCode(c>>>10&1023|55296),d+=String.fromCharCode(c&1023|56320))}return d};
$jscomp.string.repeat=function(b){var a=this.toString();if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=a),b>>>=1)a+=a;return d};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(b){var a=this.toString(),d=a.length;b=Number(b)||0;if(0<=b&&b<d){b|=0;var c=a.charCodeAt(b);if(55296>c||56319<c||b+1===d)return c;b=a.charCodeAt(b+1);return 56320>b||57343<b?c:1024*(c-55296)+b+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(b,a){a=void 0===a?0:a;$jscomp.string.noRegExp_(b,"includes");return-1!==this.toString().indexOf(b,a)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(b,a){a=void 0===a?0:a;$jscomp.string.noRegExp_(b,"startsWith");var d=this.toString();b+="";for(var c=d.length,f=b.length,g=Math.max(0,Math.min(a|0,d.length)),h=0;h<f&&g<c;)if(d[g++]!=b[h++])return!1;return h>=f};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(b,a){$jscomp.string.noRegExp_(b,"endsWith");var d=this.toString();b+="";void 0===a&&(a=d.length);for(var c=Math.max(0,Math.min(a|0,d.length)),f=b.length;0<f&&0<c;)if(d[--c]!=b[--f])return!1;return 0>=f};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};"object"===typeof module?ICAL=module.exports:"object"!==typeof ICAL&&(this.ICAL={});ICAL.foldLength=75;ICAL.newLineChar="\r\n";
ICAL.helpers={isStrictlyNaN:function(b){return"number"===typeof b&&isNaN(b)},strictParseInt:function(b){var a=parseInt(b,10);if(ICAL.helpers.isStrictlyNaN(a))throw Error('Could not extract integer from "'+b+'"');return a},formatClassType:function(b,a){return"undefined"===typeof b?void 0:b instanceof a?b:new a(b)},unescapedIndexOf:function(b,a,d){for(;-1!==(d=b.indexOf(a,d));)if(0<d&&"\\"===b[d-1])d+=1;else return d;return-1},binsearchInsert:function(b,a,d){if(!b.length)return 0;for(var c=0,f=b.length-
1,g,h;c<=f;)if(g=c+Math.floor((f-c)/2),h=d(a,b[g]),0>h)f=g-1;else if(0<h)c=g+1;else break;return 0>h?g:0<h?g+1:g},dumpn:function(b){ICAL.debug&&(ICAL.helpers.dumpn="undefined"!==typeof console&&"log"in console?function(a){console.log(a)}:function(a){dump(a+"\n")},ICAL.helpers.dumpn(b))},clone:function(b,a){if(b&&"object"==typeof b){if(b instanceof Date)return new Date(b.getTime());if("clone"in b)return b.clone();if(Array.isArray(b)){for(var d=[],c=0;c<b.length;c++)d.push(a?ICAL.helpers.clone(b[c],
!0):b[c]);return d}d={};for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=a?ICAL.helpers.clone(b[c],!0):b[c]);return d}return b},foldline:function(b){var a="";for(b=b||"";b.length;)a+=ICAL.newLineChar+" "+b.substr(0,ICAL.foldLength),b=b.substr(ICAL.foldLength);return a.substr(ICAL.newLineChar.length+1)},pad2:function(b){"string"!==typeof b&&("number"===typeof b&&(b=parseInt(b)),b=String(b));switch(b.length){case 0:return"00";case 1:return"0"+b;default:return b}},trunc:function(b){return 0>
b?Math.ceil(b):Math.floor(b)},inherits:function(b,a,d){function c(){}c.prototype=b.prototype;a.prototype=new c;d&&ICAL.helpers.extend(d,a.prototype)},extend:function(b,a){for(var d in b){var c=Object.getOwnPropertyDescriptor(b,d);c&&!Object.getOwnPropertyDescriptor(a,d)&&Object.defineProperty(a,d,c)}return a}};
ICAL.design=function(){function b(b,d){return{matches:/.*/,fromICAL:function(d,c){var f;f=b;-1===d.indexOf("\\")?f=d:(c&&(f=new RegExp(f.source+"|\\\\"+c)),f=d.replace(f,a));return f},toICAL:function(a,b){var c=d;b&&(c=new RegExp(c.source+"|"+b));return a.replace(c,function(a){switch(a){case "\\":return"\\\\";case ";":return"\\;";case ",":return"\\,";case "\n":return"\\n";default:return a}})}}}function a(a){switch(a){case "\\\\":return"\\";case "\\;":return";";case "\\,":return",";case "\\n":case "\\N":return"\n";
default:return a}}var d=/\\\\|\\,|\\[Nn]/g,c=/\\|,|\n/g,f={defaultType:"text"},g={defaultType:"text",multiValue:","},h={defaultType:"text",structuredValue:";"},k={defaultType:"integer"},m={defaultType:"date-time",allowedTypes:["date-time","date"]},n={defaultType:"date-time"},l={defaultType:"uri"},p={defaultType:"utc-offset"},q={defaultType:"recur"},r={defaultType:"date-and-or-time",allowedTypes:["date-time","date","text"]},t={categories:g,url:l,version:f,uid:f},w={"boolean":{values:["TRUE","FALSE"],
fromICAL:function(a){switch(a){case "TRUE":return!0;case "FALSE":return!1;default:return!1}},toICAL:function(a){return a?"TRUE":"FALSE"}},float:{matches:/^[+-]?\d+\.\d+$/,fromICAL:function(a){a=parseFloat(a);return ICAL.helpers.isStrictlyNaN(a)?0:a},toICAL:function(a){return String(a)}},integer:{fromICAL:function(a){a=parseInt(a);return ICAL.helpers.isStrictlyNaN(a)?0:a},toICAL:function(a){return String(a)}},"utc-offset":{toICAL:function(a){return 7>a.length?a.substr(0,3)+a.substr(4,2):a.substr(0,
3)+a.substr(4,2)+a.substr(7,2)},fromICAL:function(a){return 6>a.length?a.substr(0,3)+":"+a.substr(3,2):a.substr(0,3)+":"+a.substr(3,2)+":"+a.substr(5,2)},decorate:function(a){return ICAL.UtcOffset.fromString(a)},undecorate:function(a){return a.toString()}}},u=ICAL.helpers.extend(w,{text:b(/\\\\|\\;|\\,|\\[Nn]/g,/\\|;|,|\n/g),uri:{},binary:{decorate:function(a){return ICAL.Binary.fromString(a)},undecorate:function(a){return a.toString()}},"cal-address":{},date:{decorate:function(a,b){return ICAL.Time.fromDateString(a,
b)},undecorate:function(a){return a.toString()},fromICAL:function(a){var b=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2);"Z"===a[8]&&(b+="Z");return b},toICAL:function(a){if(11<a.length)return a;var b=a.substr(0,4)+a.substr(5,2)+a.substr(8,2);"Z"===a[10]&&(b+="Z");return b}},"date-time":{fromICAL:function(a){var b=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2)+"T"+a.substr(9,2)+":"+a.substr(11,2)+":"+a.substr(13,2);a[15]&&"Z"===a[15]&&(b+="Z");return b},toICAL:function(a){if(19>a.length)return a;
var b=a.substr(0,4)+a.substr(5,2)+a.substr(8,5)+a.substr(14,2)+a.substr(17,2);a[19]&&"Z"===a[19]&&(b+="Z");return b},decorate:function(a,b){return ICAL.Time.fromDateTimeString(a,b)},undecorate:function(a){return a.toString()}},duration:{decorate:function(a){return ICAL.Duration.fromString(a)},undecorate:function(a){return a.toString()}},period:{fromICAL:function(a){a=a.split("/");a[0]=u["date-time"].fromICAL(a[0]);ICAL.Duration.isValueString(a[1])||(a[1]=u["date-time"].fromICAL(a[1]));return a},toICAL:function(a){a[0]=
u["date-time"].toICAL(a[0]);ICAL.Duration.isValueString(a[1])||(a[1]=u["date-time"].toICAL(a[1]));return a.join("/")},decorate:function(a,b){return ICAL.Period.fromJSON(a,b)},undecorate:function(a){return a.toJSON()}},recur:{fromICAL:function(a){return ICAL.Recur._stringToData(a,!0)},toICAL:function(a){var b="",d;for(d in a)if(Object.prototype.hasOwnProperty.call(a,d)){var c=a[d];"until"==d?c=10<c.length?u["date-time"].toICAL(c):u.date.toICAL(c):"wkst"==d?"number"===typeof c&&(c=ICAL.Recur.numericDayToIcalDay(c)):
Array.isArray(c)&&(c=c.join(","));b+=d.toUpperCase()+"="+c+";"}return b.substr(0,b.length-1)},decorate:function(a){return ICAL.Recur.fromData(a)},undecorate:function(a){return a.toJSON()}},time:{fromICAL:function(a){if(6>a.length)return a;var b=a.substr(0,2)+":"+a.substr(2,2)+":"+a.substr(4,2);"Z"===a[6]&&(b+="Z");return b},toICAL:function(a){if(8>a.length)return a;var b=a.substr(0,2)+a.substr(3,2)+a.substr(6,2);"Z"===a[8]&&(b+="Z");return b}}}),k=ICAL.helpers.extend(t,{action:f,attach:{defaultType:"uri"},
attendee:{defaultType:"cal-address"},calscale:f,"class":f,comment:f,completed:n,contact:f,created:n,description:f,dtend:m,dtstamp:n,dtstart:m,due:m,duration:{defaultType:"duration"},exdate:{defaultType:"date-time",allowedTypes:["date-time","date"],multiValue:","},exrule:q,freebusy:{defaultType:"period",multiValue:","},geo:{defaultType:"float",structuredValue:";"},"last-modified":n,location:f,method:f,organizer:{defaultType:"cal-address"},"percent-complete":k,priority:k,prodid:f,"related-to":f,repeat:k,
rdate:{defaultType:"date-time",allowedTypes:["date-time","date","period"],multiValue:",",detectType:function(a){return-1!==a.indexOf("/")?"period":-1===a.indexOf("T")?"date":"date-time"}},"recurrence-id":m,resources:g,"request-status":h,rrule:q,sequence:k,status:f,summary:f,transp:f,trigger:{defaultType:"duration",allowedTypes:["duration","date-time"]},tzoffsetfrom:p,tzoffsetto:p,tzurl:l,tzid:f,tzname:f}),v=ICAL.helpers.extend(w,{text:b(d,c),uri:b(d,c),date:{decorate:function(a){return ICAL.VCardTime.fromDateAndOrTimeString(a,
"date")},undecorate:function(a){return a.toString()},fromICAL:function(a){return 8==a.length?u.date.fromICAL(a):"-"==a[0]&&6==a.length?a.substr(0,4)+"-"+a.substr(4):a},toICAL:function(a){return 10==a.length?u.date.toICAL(a):"-"==a[0]&&7==a.length?a.substr(0,4)+a.substr(5):a}},time:{decorate:function(a){return ICAL.VCardTime.fromDateAndOrTimeString("T"+a,"time")},undecorate:function(a){return a.toString()},fromICAL:function(a){var b=v.time._splitZone(a,!0);a=b[0];b=b[1];6==b.length?b=b.substr(0,2)+
":"+b.substr(2,2)+":"+b.substr(4,2):4==b.length&&"-"!=b[0]?b=b.substr(0,2)+":"+b.substr(2,2):5==b.length&&(b=b.substr(0,3)+":"+b.substr(3,2));5!=a.length||"-"!=a[0]&&"+"!=a[0]||(a=a.substr(0,3)+":"+a.substr(3));return b+a},toICAL:function(a){var b=v.time._splitZone(a);a=b[0];b=b[1];8==b.length?b=b.substr(0,2)+b.substr(3,2)+b.substr(6,2):5==b.length&&"-"!=b[0]?b=b.substr(0,2)+b.substr(3,2):6==b.length&&(b=b.substr(0,3)+b.substr(4,2));6!=a.length||"-"!=a[0]&&"+"!=a[0]||(a=a.substr(0,3)+a.substr(4));
return b+a},_splitZone:function(a,b){var d=a.length-1,c=a.length-(b?5:6),f=a[c];"Z"==a[d]?(f=a[d],d=a.substr(0,d)):6<a.length&&("-"==f||"+"==f)?(f=a.substr(c),d=a.substr(0,c)):(f="",d=a);return[f,d]}},"date-time":{decorate:function(a){return ICAL.VCardTime.fromDateAndOrTimeString(a,"date-time")},undecorate:function(a){return a.toString()},fromICAL:function(a){return v["date-and-or-time"].fromICAL(a)},toICAL:function(a){return v["date-and-or-time"].toICAL(a)}},"date-and-or-time":{decorate:function(a){return ICAL.VCardTime.fromDateAndOrTimeString(a,
"date-and-or-time")},undecorate:function(a){return a.toString()},fromICAL:function(a){a=a.split("T");return(a[0]?v.date.fromICAL(a[0]):"")+(a[1]?"T"+v.time.fromICAL(a[1]):"")},toICAL:function(a){a=a.split("T");return v.date.toICAL(a[0])+(a[1]?"T"+v.time.toICAL(a[1]):"")}},timestamp:u["date-time"],"language-tag":{matches:/^[a-zA-Z0-9\-]+$/}}),d=ICAL.helpers.extend(t,{adr:{defaultType:"text",structuredValue:";",multiValue:","},anniversary:r,bday:r,caladruri:l,caluri:l,clientpidmap:h,email:f,fburl:l,
fn:f,gender:h,geo:l,impp:l,key:l,kind:f,lang:{defaultType:"language-tag"},logo:l,member:l,n:{defaultType:"text",structuredValue:";",multiValue:","},nickname:g,note:f,org:{defaultType:"text",structuredValue:";"},photo:l,related:l,rev:{defaultType:"timestamp"},role:f,sound:l,source:l,tel:{defaultType:"uri",allowedTypes:["uri","text"]},title:f,tz:{defaultType:"text",allowedTypes:["text","utc-offset","uri"]},xml:f}),w=ICAL.helpers.extend(w,{binary:u.binary,date:v.date,"date-time":v["date-time"],"phone-number":{},
uri:u.uri,text:u.text,time:u.time,vcard:u.text,"utc-offset":{toICAL:function(a){return a.substr(0,7)},fromICAL:function(a){return a.substr(0,7)},decorate:function(a){return ICAL.UtcOffset.fromString(a)},undecorate:function(a){return a.toString()}}}),f=ICAL.helpers.extend(t,{fn:f,n:{defaultType:"text",structuredValue:";",multiValue:","},nickname:g,photo:{defaultType:"binary",allowedTypes:["binary","uri"]},bday:{defaultType:"date-time",allowedTypes:["date-time","date"],detectType:function(a){return-1===
a.indexOf("T")?"date":"date-time"}},adr:{defaultType:"text",structuredValue:";",multiValue:","},label:f,tel:{defaultType:"phone-number"},email:f,mailer:f,tz:{defaultType:"utc-offset",allowedTypes:["utc-offset","text"]},geo:{defaultType:"float",structuredValue:";"},title:f,role:f,logo:{defaultType:"binary",allowedTypes:["binary","uri"]},agent:{defaultType:"vcard",allowedTypes:["vcard","text","uri"]},org:h,note:g,prodid:f,rev:{defaultType:"date-time",allowedTypes:["date-time","date"],detectType:function(a){return-1===
a.indexOf("T")?"date":"date-time"}},"sort-string":f,sound:{defaultType:"binary",allowedTypes:["binary","uri"]},class:f,key:{defaultType:"binary",allowedTypes:["binary","text"]}}),g={value:u,param:{cutype:{values:["INDIVIDUAL","GROUP","RESOURCE","ROOM","UNKNOWN"],allowXName:!0,allowIanaToken:!0},"delegated-from":{valueType:"cal-address",multiValue:",",multiValueSeparateDQuote:!0},"delegated-to":{valueType:"cal-address",multiValue:",",multiValueSeparateDQuote:!0},encoding:{values:["8BIT","BASE64"]},
fbtype:{values:["FREE","BUSY","BUSY-UNAVAILABLE","BUSY-TENTATIVE"],allowXName:!0,allowIanaToken:!0},member:{valueType:"cal-address",multiValue:",",multiValueSeparateDQuote:!0},partstat:{values:"NEEDS-ACTION ACCEPTED DECLINED TENTATIVE DELEGATED COMPLETED IN-PROCESS".split(" "),allowXName:!0,allowIanaToken:!0},range:{values:["THISLANDFUTURE"]},related:{values:["START","END"]},reltype:{values:["PARENT","CHILD","SIBLING"],allowXName:!0,allowIanaToken:!0},role:{values:["REQ-PARTICIPANT","CHAIR","OPT-PARTICIPANT",
"NON-PARTICIPANT"],allowXName:!0,allowIanaToken:!0},rsvp:{values:["TRUE","FALSE"]},"sent-by":{valueType:"cal-address"},tzid:{matches:/^\//},value:{values:"binary boolean cal-address date date-time duration float integer period recur text time uri utc-offset".split(" "),allowXName:!0,allowIanaToken:!0}},property:k},h={value:v,param:{type:{valueType:"text",multiValue:","},value:{values:"text uri date time date-time date-and-or-time timestamp boolean integer float utc-offset language-tag".split(" "),
allowXName:!0,allowIanaToken:!0}},property:d},f={value:w,param:{type:{valueType:"text",multiValue:","},value:{values:"text uri date date-time phone-number time boolean integer float utc-offset vcard binary".split(" "),allowXName:!0,allowIanaToken:!0}},property:f},x={defaultSet:g,defaultType:"unknown",components:{vcard:h,vcard3:f,vevent:g,vtodo:g,vjournal:g,valarm:g,vtimezone:g,daylight:g,standard:g},icalendar:g,vcard:h,vcard3:f,getDesignSet:function(a){return a&&a in x.components?x.components[a]:
x.defaultSet}};return x}();
ICAL.stringify=function(){function b(a){"string"==typeof a[0]&&(a=[a]);for(var d=0,c=a.length,k="";d<c;d++)k+=b.component(a[d])+"\r\n";return k}var a=ICAL.design,d=ICAL.helpers;b.component=function(d,c){var h=d[0].toUpperCase(),k="BEGIN:"+h+"\r\n",m=d[1],n=0,l=m.length,p=d[0];"vcard"===p&&0<d[1].length&&("version"!==d[1][0][0]||"4.0"!==d[1][0][3])&&(p="vcard3");for(c=c||a.getDesignSet(p);n<l;n++)k+=b.property(m[n],c)+"\r\n";m=d[2];n=0;for(l=m.length;n<l;n++)k+=b.component(m[n],c)+"\r\n";return k+
("END:"+h)};b.property=function(d,c,h){var k=d[0].toUpperCase(),m=d[0],n=d[1],l;for(l in n){var p=n[l];if(n.hasOwnProperty(l)){var q=l in c.param&&c.param[l].multiValue;q&&Array.isArray(p)?(c.param[l].multiValueSeparateDQuote&&(q='"'+q+'"'),p=p.map(b._rfc6868Unescape),p=b.multiValue(p,q,"unknown",null,c)):p=b._rfc6868Unescape(p);k+=";"+l.toUpperCase();k+="="+b.propertyValue(p)}}if(3===d.length)return k+":";n=d[2];c||(c=a.defaultSet);p=l=q=!1;m in c.property?(m=c.property[m],"multiValue"in m&&(q=m.multiValue),
"structuredValue"in m&&Array.isArray(d[3])&&(l=m.structuredValue),"defaultType"in m?n===m.defaultType&&(p=!0):"unknown"===n&&(p=!0)):"unknown"===n&&(p=!0);p||(k+=";VALUE="+n.toUpperCase());k+=":";k=q&&l?k+b.multiValue(d[3],l,n,q,c,l):q?k+b.multiValue(d.slice(3),q,n,null,c,!1):l?k+b.multiValue(d[3],l,n,null,c,l):k+b.value(d[3],n,c,!1);return h?k:ICAL.helpers.foldline(k)};b.propertyValue=function(a){return-1===d.unescapedIndexOf(a,",")&&-1===d.unescapedIndexOf(a,":")&&-1===d.unescapedIndexOf(a,";")?
a:'"'+a+'"'};b.multiValue=function(a,d,c,k,m,n){for(var l="",p=a.length,q=0;q<p;q++)l=k&&Array.isArray(a[q])?l+b.multiValue(a[q],k,c,null,m,n):l+b.value(a[q],c,m,n),q!==p-1&&(l+=d);return l};b.value=function(a,b,d,c){return b in d.value&&"toICAL"in d.value[b]?d.value[b].toICAL(a,c):a};b._rfc6868Unescape=function(a){return a.replace(/[\n^"]/g,function(a){return c[a]})};var c={'"':"^'","\n":"^n","^":"^^"};return b}();
ICAL.parse=function(){function b(a){this.message=a;this.name="ParserError";try{throw Error();}catch(b){b.stack&&(a=b.stack.split("\n"),a.shift(),this.stack=a.join("\n"))}}function a(d){var c={},f=c.component=[];c.stack=[f];a._eachLine(d,function(b,d){a._handleContentLine(d,c)});if(1<c.stack.length)throw new b("invalid ical body. component began but did not end");c=null;return 1==f.length?f[0]:f}var d=/[^ \t]/,c=ICAL.design,f=ICAL.helpers;b.prototype=Error.prototype;a.property=function(b,d){var f=
{component:[[],[]],designSet:d||c.defaultSet};a._handleContentLine(b,f);return f.component[1][0]};a.component=function(b){return a(b)};a.ParserError=b;a._handleContentLine=function(d,f){var g=d.indexOf(":"),n=d.indexOf(";"),l,p={};-1!==n&&-1!==g&&n>g&&(n=-1);if(-1!==n){l=d.substring(0,n).toLowerCase();g=a._parseParameters(d.substring(n),0,f.designSet);if(-1==g[2])throw new b("Invalid parameters in '"+d+"'");p=g[0];n=g[1].length+g[2]+n;if(-1!==(g=d.substring(n).indexOf(":")))n=d.substring(n+g+1);else throw new b("Missing parameter value in '"+
d+"'");}else if(-1!==g){l=d.substring(0,g).toLowerCase();n=d.substring(g+1);if("begin"===l){l=[n.toLowerCase(),[],[]];1===f.stack.length?f.component.push(l):f.component[2].push(l);f.stack.push(f.component);f.component=l;f.designSet||(f.designSet=c.getDesignSet(f.component[0]));return}if("end"===l){f.component=f.stack.pop();return}}else throw new b('invalid line (no token ";" or ":") "'+d+'"');var q,r=g=!1,t;l in f.designSet.property&&(t=f.designSet.property[l],"multiValue"in t&&(g=t.multiValue),"structuredValue"in
t&&(r=t.structuredValue),n&&"detectType"in t&&(q=t.detectType(n)));q||(q="value"in p?p.value.toLowerCase():t?t.defaultType:"unknown");delete p.value;g&&r?(n=a._parseMultiValue(n,r,q,[],g,f.designSet,r),p=[l,p,q,n]):g?(p=[l,p,q],a._parseMultiValue(n,g,q,p,null,f.designSet,!1)):(n=r?a._parseMultiValue(n,r,q,[],null,f.designSet,r):a._parseValue(n,q,f.designSet,!1),p=[l,p,q,n]);"vcard"!==f.component[0]||0!==f.component[1].length||"version"===l&&"4.0"===n||(f.designSet=c.getDesignSet("vcard3"));f.component[1].push(p)};
a._parseValue=function(a,b,d,c){return b in d.value&&"fromICAL"in d.value[b]?d.value[b].fromICAL(a,c):a};a._parseParameters=function(d,c,g){var n=c,l=0;c={};for(var p,q,r=-1,t,w;!1!==l&&-1!==(l=f.unescapedIndexOf(d,"=",l+1));){p=d.substr(n+1,l-n-1);if(0==p.length)throw new b("Empty parameter name in '"+d+"'");p=p.toLowerCase();t=p in g.param&&g.param[p].valueType?g.param[p].valueType:"text";p in g.param&&(w=g.param[p].multiValue);if('"'===d[l+1]){r=l+2;l=f.unescapedIndexOf(d,'"',r);if(w&&-1!==l){n=
l;for(l=!0;l;){q=f.unescapedIndexOf(d,w,n+1);var u=f.unescapedIndexOf(d,";",n+1),v=f.unescapedIndexOf(d,":",n+1),x=f.unescapedIndexOf(d,'"',n+1);x>q&&(u>x||v>x)?n=f.unescapedIndexOf(d,'"',x+1):l=!1}l=n}if(-1===l)throw new b('invalid line (no matching double quote) "'+d+'"');q=d.substr(r,l-r);n=f.unescapedIndexOf(d,";",l);-1===n&&(l=!1)}else r=l+1,q=f.unescapedIndexOf(d,";",r),l=f.unescapedIndexOf(d,":",r),-1!==l&&q>l?(q=l,l=!1):-1===q?(q=-1===l?d.length:l,l=!1):l=n=q,q=d.substr(r,q-r);q=a._rfc6868Escape(q);
c[p]=w?a._parseMultiValue(q,w,t,[],null,g):a._parseValue(q,t,g)}return[c,q,r]};a._rfc6868Escape=function(a){return a.replace(/\^['n^]/g,function(a){return g[a]})};var g={"^'":'"',"^n":"\n","^^":"^"};a._parseMultiValue=function(b,d,c,g,l,p,q){var r=0,t=0;if(0===d.length)return b;for(;-1!==(r=f.unescapedIndexOf(b,d,t));)t=b.substr(t,r-t),t=l?a._parseMultiValue(t,l,c,[],null,p,q):a._parseValue(t,c,p,q),g.push(t),t=r+d.length;t=b.substr(t);t=l?a._parseMultiValue(t,l,c,[],null,p,q):a._parseValue(t,c,p,
q);g.push(t);return 1==g.length?g[0]:g};a._eachLine=function(a,b){var c=a.length,f=a.search(d),g=f,p,q,r;do g=a.indexOf("\n",f)+1,r=1<g&&"\r"===a[g-2]?2:1,0===g&&(g=c,r=0),q=a[f]," "===q||"\t"===q?p+=a.substr(f+1,g-f-(r+1)):(p&&b(null,p),p=a.substr(f,g-f-r)),f=g;while(g!==c);p=p.trim();p.length&&b(null,p)};return a}();
ICAL.Component=function(){function b(a,b){"string"===typeof a&&(a=[a,[],[]]);this.jCal=a;this.parent=b||null}b.prototype={_hydratedPropertyCount:0,_hydratedComponentCount:0,get name(){return this.jCal[0]},get _designSet(){return this.parent&&this.parent._designSet||ICAL.design.getDesignSet(this.name)},_hydrateComponent:function(a){this._components||(this._components=[],this._hydratedComponentCount=0);if(this._components[a])return this._components[a];var d=new b(this.jCal[2][a],this);this._hydratedComponentCount++;
return this._components[a]=d},_hydrateProperty:function(a){this._properties||(this._properties=[],this._hydratedPropertyCount=0);if(this._properties[a])return this._properties[a];var b=new ICAL.Property(this.jCal[1][a],this);this._hydratedPropertyCount++;return this._properties[a]=b},getFirstSubcomponent:function(a){if(a)for(var b=0,c=this.jCal[2],f=c.length;b<f;b++){if(c[b][0]===a)return this._hydrateComponent(b)}else if(this.jCal[2].length)return this._hydrateComponent(0);return null},getAllSubcomponents:function(a){var b=
this.jCal[2].length,c=0;if(a){for(var f=this.jCal[2],g=[];c<b;c++)a===f[c][0]&&g.push(this._hydrateComponent(c));return g}if(!this._components||this._hydratedComponentCount!==b)for(;c<b;c++)this._hydrateComponent(c);return this._components||[]},hasProperty:function(a){for(var b=this.jCal[1],c=b.length,f=0;f<c;f++)if(b[f][0]===a)return!0;return!1},getFirstProperty:function(a){if(a)for(var b=0,c=this.jCal[1],f=c.length;b<f;b++){if(c[b][0]===a)return this._hydrateProperty(b)}else if(this.jCal[1].length)return this._hydrateProperty(0);
return null},getFirstPropertyValue:function(a){return(a=this.getFirstProperty(a))?a.getFirstValue():null},getAllProperties:function(a){var b=this.jCal[1].length,c=0;if(a){for(var f=this.jCal[1],g=[];c<b;c++)a===f[c][0]&&g.push(this._hydrateProperty(c));return g}if(!this._properties||this._hydratedPropertyCount!==b)for(;c<b;c++)this._hydrateProperty(c);return this._properties||[]},_removeObjectByIndex:function(a,b,c){if(b&&b[c]){var f=b[c];"parent"in f&&(f.parent=null);b.splice(c,1)}this.jCal[a].splice(c,
1)},_removeObject:function(a,b,c){var f=0,g=this.jCal[a],h=g.length;b=this[b];if("string"===typeof c)for(;f<h;f++){if(g[f][0]===c)return this._removeObjectByIndex(a,b,f),!0}else if(b)for(;f<h;f++)if(b[f]&&b[f]===c)return this._removeObjectByIndex(a,b,f),!0;return!1},_removeAllObjects:function(a,b,c){b=this[b];for(var f=this.jCal[a],g=f.length-1;0<=g;g--)c&&f[g][0]!==c||this._removeObjectByIndex(a,b,g)},addSubcomponent:function(a){this._components||(this._components=[],this._hydratedComponentCount=
0);a.parent&&a.parent.removeSubcomponent(a);var b=this.jCal[2].push(a.jCal);this._components[b-1]=a;this._hydratedComponentCount++;a.parent=this;return a},removeSubcomponent:function(a){(a=this._removeObject(2,"_components",a))&&this._hydratedComponentCount--;return a},removeAllSubcomponents:function(a){a=this._removeAllObjects(2,"_components",a);this._hydratedComponentCount=0;return a},addProperty:function(a){if(!(a instanceof ICAL.Property))throw new TypeError("must instance of ICAL.Property");
this._properties||(this._properties=[],this._hydratedPropertyCount=0);a.parent&&a.parent.removeProperty(a);var b=this.jCal[1].push(a.jCal);this._properties[b-1]=a;this._hydratedPropertyCount++;a.parent=this;return a},addPropertyWithValue:function(a,b){var c=new ICAL.Property(a);c.setValue(b);this.addProperty(c);return c},updatePropertyWithValue:function(a,b){var c=this.getFirstProperty(a);c?c.setValue(b):c=this.addPropertyWithValue(a,b);return c},removeProperty:function(a){(a=this._removeObject(1,
"_properties",a))&&this._hydratedPropertyCount--;return a},removeAllProperties:function(a){a=this._removeAllObjects(1,"_properties",a);this._hydratedPropertyCount=0;return a},toJSON:function(){return this.jCal},toString:function(){return ICAL.stringify.component(this.jCal,this._designSet)}};b.fromString=function(a){return new b(ICAL.parse.component(a))};return b}();
ICAL.Property=function(){function b(b,c){this._parent=c||null;"string"===typeof b?(this.jCal=[b,{},a.defaultType],this.jCal[2]=this.getDefaultType()):this.jCal=b;this._updateType()}var a=ICAL.design;b.prototype={get type(){return this.jCal[2]},get name(){return this.jCal[0]},get parent(){return this._parent},set parent(b){var c=!this._parent||b&&b._designSet!=this._parent._designSet;this._parent=b;this.type==a.defaultType&&c&&(this.jCal[2]=this.getDefaultType(),this._updateType());return b},get _designSet(){return this.parent?
this.parent._designSet:a.defaultSet},_updateType:function(){var a=this._designSet;this.type in a.value&&(this.isDecorated="decorate"in a.value[this.type]?!0:!1,this.name in a.property&&(this.isMultiValue="multiValue"in a.property[this.name],this.isStructuredValue="structuredValue"in a.property[this.name]))},_hydrateValue:function(a){return this._values&&this._values[a]?this._values[a]:this.jCal.length<=3+a?null:this.isDecorated?(this._values||(this._values=[]),this._values[a]=this._decorate(this.jCal[3+
a])):this.jCal[3+a]},_decorate:function(a){return this._designSet.value[this.type].decorate(a,this)},_undecorate:function(a){return this._designSet.value[this.type].undecorate(a,this)},_setDecoratedValue:function(a,b){this._values||(this._values=[]);"object"===typeof a&&"icaltype"in a?(this.jCal[3+b]=this._undecorate(a),this._values[b]=a):(this.jCal[3+b]=a,this._values[b]=this._decorate(a))},getParameter:function(a){if(a in this.jCal[1])return this.jCal[1][a]},setParameter:function(a,b){var f=a.toLowerCase();
"string"===typeof b&&f in this._designSet.param&&"multiValue"in this._designSet.param[f]&&(b=[b]);this.jCal[1][a]=b},removeParameter:function(a){delete this.jCal[1][a]},getDefaultType:function(){var b=this.jCal[0],c=this._designSet;return b in c.property&&(b=c.property[b],"defaultType"in b)?b.defaultType:a.defaultType},resetType:function(a){this.removeAllValues();this.jCal[2]=a;this._updateType()},getFirstValue:function(){return this._hydrateValue(0)},getValues:function(){var a=this.jCal.length-3;
if(1>a)return[];for(var b=0,f=[];b<a;b++)f[b]=this._hydrateValue(b);return f},removeAllValues:function(){this._values&&(this._values.length=0);this.jCal.length=3},setValues:function(a){if(!this.isMultiValue)throw Error(this.name+": does not not support mulitValue.\noverride isMultiValue");var b=a.length,f=0;this.removeAllValues();0<b&&"object"===typeof a[0]&&"icaltype"in a[0]&&this.resetType(a[0].icaltype);if(this.isDecorated)for(;f<b;f++)this._setDecoratedValue(a[f],f);else for(;f<b;f++)this.jCal[3+
f]=a[f]},setValue:function(a){this.removeAllValues();"object"===typeof a&&"icaltype"in a&&this.resetType(a.icaltype);this.isDecorated?this._setDecoratedValue(a,0):this.jCal[3]=a},toJSON:function(){return this.jCal},toICALString:function(){return ICAL.stringify.property(this.jCal,this._designSet,!0)}};b.fromString=function(a,c){return new b(ICAL.parse.property(a,c))};return b}();
ICAL.UtcOffset=function(){function b(a){this.fromData(a)}b.prototype={hours:0,minutes:0,factor:1,icaltype:"utc-offset",clone:function(){return ICAL.UtcOffset.fromSeconds(this.toSeconds())},fromData:function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this._normalize()},fromSeconds:function(a){var b=Math.abs(a);this.factor=0>a?-1:1;this.hours=ICAL.helpers.trunc(b/3600);b-=3600*this.hours;this.minutes=ICAL.helpers.trunc(b/60);return this},toSeconds:function(){return this.factor*(60*this.minutes+
3600*this.hours)},compare:function(a){var b=this.toSeconds();a=a.toSeconds();return(b>a)-(a>b)},_normalize:function(){for(var a=this.toSeconds(),b=this.factor;-43200>a;)a+=97200;for(;50400<a;)a-=97200;this.fromSeconds(a);0==a&&(this.factor=b)},toICALString:function(){return ICAL.design.icalendar.value["utc-offset"].toICAL(this.toString())},toString:function(){return(1==this.factor?"+":"-")+ICAL.helpers.pad2(this.hours)+":"+ICAL.helpers.pad2(this.minutes)}};b.fromString=function(a){var b={};b.factor=
"+"===a[0]?1:-1;b.hours=ICAL.helpers.strictParseInt(a.substr(1,2));b.minutes=ICAL.helpers.strictParseInt(a.substr(4,2));return new ICAL.UtcOffset(b)};b.fromSeconds=function(a){var d=new b;d.fromSeconds(a);return d};return b}();
ICAL.Binary=function(){function b(a){this.value=a}b.prototype={icaltype:"binary",decodeValue:function(){return this._b64_decode(this.value)},setEncodedValue:function(a){this.value=this._b64_encode(a)},_b64_encode:function(a){var b,c,f,g,h=0,k=0,m="",m=[];if(!a)return a;do b=a.charCodeAt(h++),c=a.charCodeAt(h++),f=a.charCodeAt(h++),g=b<<16|c<<8|f,b=g>>18&63,c=g>>12&63,f=g>>6&63,g&=63,m[k++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g);while(h<a.length);m=m.join("");a=a.length%3;return(a?m.slice(0,a-3):m)+"===".slice(a||3)},_b64_decode:function(a){var b,c,f,g,h,k=0,m=0;g="";var n=[];if(!a)return a;a+="";do b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),
g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),f=b<<18|c<<12|g<<6|h,b=f>>16&255,c=f>>8&255,f&=255,64==g?n[m++]=String.fromCharCode(b):64==h?n[m++]=String.fromCharCode(b,c):n[m++]=String.fromCharCode(b,c,f);while(k<a.length);return g=n.join("")},toString:function(){return this.value}};b.fromString=function(a){return new b(a)};return b}();
(function(){ICAL.Period=function(b){this.wrappedJSObject=this;if(b&&"start"in b){if(b.start&&!(b.start instanceof ICAL.Time))throw new TypeError(".start must be an instance of ICAL.Time");this.start=b.start}if(b&&b.end&&b.duration)throw Error("cannot accept both end and duration");if(b&&"end"in b){if(b.end&&!(b.end instanceof ICAL.Time))throw new TypeError(".end must be an instance of ICAL.Time");this.end=b.end}if(b&&"duration"in b){if(b.duration&&!(b.duration instanceof ICAL.Duration))throw new TypeError(".duration must be an instance of ICAL.Duration");
this.duration=b.duration}};ICAL.Period.prototype={start:null,end:null,duration:null,icalclass:"icalperiod",icaltype:"period",clone:function(){return ICAL.Period.fromData({start:this.start?this.start.clone():null,end:this.end?this.end.clone():null,duration:this.duration?this.duration.clone():null})},getDuration:function(){return this.duration?this.duration:this.end.subtractDate(this.start)},getEnd:function(){if(this.end)return this.end;var b=this.start.clone();b.addDuration(this.duration);return b},
toString:function(){return this.start+"/"+(this.end||this.duration)},toJSON:function(){return[this.start.toString(),(this.end||this.duration).toString()]},toICALString:function(){return this.start.toICALString()+"/"+(this.end||this.duration).toICALString()}};ICAL.Period.fromString=function(b,a){var d=b.split("/");if(2!==d.length)throw Error('Invalid string value: "'+b+'" must contain a "/" char.');var c={start:ICAL.Time.fromDateTimeString(d[0],a)},d=d[1];ICAL.Duration.isValueString(d)?c.duration=
ICAL.Duration.fromString(d):c.end=ICAL.Time.fromDateTimeString(d,a);return new ICAL.Period(c)};ICAL.Period.fromData=function(b){return new ICAL.Period(b)};ICAL.Period.fromJSON=function(b,a){return ICAL.Duration.isValueString(b[1])?ICAL.Period.fromData({start:ICAL.Time.fromDateTimeString(b[0],a),duration:ICAL.Duration.fromString(b[1])}):ICAL.Period.fromData({start:ICAL.Time.fromDateTimeString(b[0],a),end:ICAL.Time.fromDateTimeString(b[1],a)})}})();
(function(){var b=/([PDWHMTS]{1,1})/;ICAL.Duration=function(a){this.wrappedJSObject=this;this.fromData(a)};ICAL.Duration.prototype={weeks:0,days:0,hours:0,minutes:0,seconds:0,isNegative:!1,icalclass:"icalduration",icaltype:"duration",clone:function(){return ICAL.Duration.fromData(this)},toSeconds:function(){var a=this.seconds+60*this.minutes+3600*this.hours+86400*this.days+604800*this.weeks;return this.isNegative?-a:a},fromSeconds:function(a){var b=Math.abs(a);this.isNegative=0>a;this.days=ICAL.helpers.trunc(b/
86400);0==this.days%7?(this.weeks=this.days/7,this.days=0):this.weeks=0;b-=86400*(this.days+7*this.weeks);this.hours=ICAL.helpers.trunc(b/3600);b-=3600*this.hours;this.minutes=ICAL.helpers.trunc(b/60);this.seconds=b-=60*this.minutes;return this},fromData:function(a){var b="weeks days hours minutes seconds isNegative".split(" "),c;for(c in b)if(b.hasOwnProperty(c)){var f=b[c];this[f]=a&&f in a?a[f]:0}},reset:function(){this.isNegative=!1;this.seconds=this.minutes=this.hours=this.days=this.weeks=0},
compare:function(a){var b=this.toSeconds();a=a.toSeconds();return(b>a)-(b<a)},normalize:function(){this.fromSeconds(this.toSeconds())},toString:function(){if(0==this.toSeconds())return"PT0S";var a="";this.isNegative&&(a+="-");a+="P";this.weeks&&(a+=this.weeks+"W");this.days&&(a+=this.days+"D");if(this.hours||this.minutes||this.seconds)a+="T",this.hours&&(a+=this.hours+"H"),this.minutes&&(a+=this.minutes+"M"),this.seconds&&(a+=this.seconds+"S");return a},toICALString:function(){return this.toString()}};
ICAL.Duration.fromSeconds=function(a){return(new ICAL.Duration).fromSeconds(a)};ICAL.Duration.isValueString=function(a){return"P"===a[0]||"P"===a[1]};ICAL.Duration.fromString=function(a){for(var d=0,c=Object.create(null),f=0;-1!==(d=a.search(b));){var g=a[d],h=a.substr(0,d);a=a.substr(d+1);d=f;a:{var f=c,k=void 0;switch(g){case "P":f.isNegative=h&&"-"===h?!0:!1;break;case "D":k="days";break;case "W":k="weeks";break;case "H":k="hours";break;case "M":k="minutes";break;case "S":k="seconds";break;default:g=
0;break a}if(k){if(!h&&0!==h)throw Error('invalid duration value: Missing number before "'+g+'"');var m=parseInt(h,10);if(ICAL.helpers.isStrictlyNaN(m))throw Error('invalid duration value: Invalid number "'+h+'" before "'+g+'"');f[k]=m}g=1}f=d+g}if(2>f)throw Error('invalid duration value: Not enough duration components in "'+a+'"');return new ICAL.Duration(c)};ICAL.Duration.fromData=function(a){return new ICAL.Duration(a)}})();
(function(){var b=["tzid","location","tznames","latitude","longitude"];ICAL.Timezone=function(a){this.wrappedJSObject=this;this.fromData(a)};ICAL.Timezone.prototype={tzid:"",location:"",tznames:"",latitude:0,longitude:0,component:null,expandedUntilYear:0,icalclass:"icaltimezone",fromData:function(a){this.expandedUntilYear=0;this.changes=[];if(a instanceof ICAL.Component)this.component=a;else{if(a&&"component"in a)if("string"==typeof a.component){var d=ICAL.parse(a.component);this.component=new ICAL.Component(d)}else this.component=
a.component instanceof ICAL.Component?a.component:null;for(var c in b)b.hasOwnProperty(c)&&(d=b[c],a&&d in a&&(this[d]=a[d]))}this.component instanceof ICAL.Component&&!this.tzid&&(this.tzid=this.component.getFirstPropertyValue("tzid"));return this},utcOffset:function(a){if(this==ICAL.Timezone.utcTimezone||this==ICAL.Timezone.localTimezone)return 0;this._ensureCoverage(a.year);if(!this.changes.length)return 0;a={year:a.year,month:a.month,day:a.day,hour:a.hour,minute:a.minute,second:a.second};for(var b=
this._findNearbyChange(a),c=-1,f=1;;){var g=ICAL.helpers.clone(this.changes[b],!0);g.utcOffset<g.prevUtcOffset?ICAL.Timezone.adjust_change(g,0,0,0,g.utcOffset):ICAL.Timezone.adjust_change(g,0,0,0,g.prevUtcOffset);0<=ICAL.Timezone._compare_change_fn(a,g)?c=b:f=-1;if(-1==f&&-1!=c)break;b+=f;if(0>b)return 0;if(b>=this.changes.length)break}b=this.changes[c];0>b.utcOffset-b.prevUtcOffset&&0<c&&(f=ICAL.helpers.clone(b,!0),ICAL.Timezone.adjust_change(f,0,0,0,f.prevUtcOffset),0>ICAL.Timezone._compare_change_fn(a,
f)&&(a=this.changes[c-1],0!=b.is_daylight&&0==a.is_daylight&&(b=a)));return b.utcOffset},_findNearbyChange:function(a){a=ICAL.helpers.binsearchInsert(this.changes,a,ICAL.Timezone._compare_change_fn);return a>=this.changes.length?this.changes.length-1:a},_ensureCoverage:function(a){if(-1==ICAL.Timezone._minimumExpansionYear){var b=ICAL.Time.now();ICAL.Timezone._minimumExpansionYear=b.year}b=a;b<ICAL.Timezone._minimumExpansionYear&&(b=ICAL.Timezone._minimumExpansionYear);b+=ICAL.Timezone.EXTRA_COVERAGE;
b>ICAL.Timezone.MAX_YEAR&&(b=ICAL.Timezone.MAX_YEAR);if(!this.changes.length||this.expandedUntilYear<a){a=this.component.getAllSubcomponents();for(var c=a.length,f=0;f<c;f++)this._expandComponent(a[f],b,this.changes);this.changes.sort(ICAL.Timezone._compare_change_fn);this.expandedUntilYear=b}},_expandComponent:function(a,b,c){function f(a){return a.factor*(3600*a.hours+60*a.minutes)}function g(){var b={};b.is_daylight="daylight"==a.name;b.utcOffset=f(a.getFirstProperty("tzoffsetto").getFirstValue());
b.prevUtcOffset=f(a.getFirstProperty("tzoffsetfrom").getFirstValue());return b}if(!a.hasProperty("dtstart")||!a.hasProperty("tzoffsetto")||!a.hasProperty("tzoffsetfrom"))return null;var h=a.getFirstProperty("dtstart").getFirstValue(),k;if(a.hasProperty("rrule")||a.hasProperty("rdate")){var m=a.getAllProperties("rdate"),n;for(n in m)if(m.hasOwnProperty(n)){var l=m[n].getFirstValue();k=g();k.year=l.year;k.month=l.month;k.day=l.day;l.isDate?(k.hour=h.hour,k.minute=h.minute,k.second=h.second,h.zone!=
ICAL.Timezone.utcTimezone&&ICAL.Timezone.adjust_change(k,0,0,0,-k.prevUtcOffset)):(k.hour=l.hour,k.minute=l.minute,k.second=l.second,l.zone!=ICAL.Timezone.utcTimezone&&ICAL.Timezone.adjust_change(k,0,0,0,-k.prevUtcOffset));c.push(k)}if(m=a.getFirstProperty("rrule"))for(m=m.getFirstValue(),k=g(),m.until&&m.until.zone==ICAL.Timezone.utcTimezone&&(m.until.adjust(0,0,0,k.prevUtcOffset),m.until.zone=ICAL.Timezone.localTimezone),h=m.iterator(h);m=h.next();){k=g();if(m.year>b||!m)break;k.year=m.year;k.month=
m.month;k.day=m.day;k.hour=m.hour;k.minute=m.minute;k.second=m.second;k.isDate=m.isDate;ICAL.Timezone.adjust_change(k,0,0,0,-k.prevUtcOffset);c.push(k)}}else k=g(),k.year=h.year,k.month=h.month,k.day=h.day,k.hour=h.hour,k.minute=h.minute,k.second=h.second,ICAL.Timezone.adjust_change(k,0,0,0,-k.prevUtcOffset),c.push(k);return c},toString:function(){return this.tznames?this.tznames:this.tzid}};ICAL.Timezone._compare_change_fn=function(a,b){return a.year<b.year?-1:a.year>b.year?1:a.month<b.month?-1:
a.month>b.month?1:a.day<b.day?-1:a.day>b.day?1:a.hour<b.hour?-1:a.hour>b.hour?1:a.minute<b.minute?-1:a.minute>b.minute?1:a.second<b.second?-1:a.second>b.second?1:0};ICAL.Timezone.convert_time=function(a,b,c){if(a.isDate||b.tzid==c.tzid||b==ICAL.Timezone.localTimezone||c==ICAL.Timezone.localTimezone)return a.zone=c,a;b=b.utcOffset(a);a.adjust(0,0,0,-b);b=c.utcOffset(a);a.adjust(0,0,0,b);return null};ICAL.Timezone.fromData=function(a){return(new ICAL.Timezone).fromData(a)};ICAL.Timezone.utcTimezone=
ICAL.Timezone.fromData({tzid:"UTC"});ICAL.Timezone.localTimezone=ICAL.Timezone.fromData({tzid:"floating"});ICAL.Timezone.adjust_change=function(a,b,c,f,g){return ICAL.Time.prototype.adjust.call(a,b,c,f,g,a)};ICAL.Timezone._minimumExpansionYear=-1;ICAL.Timezone.MAX_YEAR=2035;ICAL.Timezone.EXTRA_COVERAGE=5})();
ICAL.TimezoneService=function(){var b,a={reset:function(){b=Object.create(null);var a=ICAL.Timezone.utcTimezone;b.Z=a;b.UTC=a;b.GMT=a},has:function(a){return!!b[a]},get:function(a){return b[a]},register:function(a,c){a instanceof ICAL.Component&&"vtimezone"===a.name&&(c=new ICAL.Timezone(a),a=c.tzid);if(c instanceof ICAL.Timezone)b[a]=c;else throw new TypeError("timezone must be ICAL.Timezone or ICAL.Component");},remove:function(a){return delete b[a]}};a.reset();return a}();
(function(){ICAL.Time=function(b,a){this.wrappedJSObject=this;var d=this._time=Object.create(null);d.year=0;d.month=1;d.day=1;d.hour=0;d.minute=0;d.second=0;d.isDate=!1;this.fromData(b,a)};ICAL.Time._dowCache={};ICAL.Time._wnCache={};ICAL.Time.prototype={icalclass:"icaltime",_cachedUnixTime:null,get icaltype(){return this.isDate?"date":"date-time"},zone:null,_pendingNormalization:!1,clone:function(){return new ICAL.Time(this._time,this.zone)},reset:function(){this.fromData(ICAL.Time.epochTime);this.zone=
ICAL.Timezone.utcTimezone},resetTo:function(b,a,d,c,f,g,h){this.fromData({year:b,month:a,day:d,hour:c,minute:f,second:g,zone:h})},fromJSDate:function(b,a){b?a?(this.zone=ICAL.Timezone.utcTimezone,this.year=b.getUTCFullYear(),this.month=b.getUTCMonth()+1,this.day=b.getUTCDate(),this.hour=b.getUTCHours(),this.minute=b.getUTCMinutes(),this.second=b.getUTCSeconds()):(this.zone=ICAL.Timezone.localTimezone,this.year=b.getFullYear(),this.month=b.getMonth()+1,this.day=b.getDate(),this.hour=b.getHours(),this.minute=
b.getMinutes(),this.second=b.getSeconds()):this.reset();this._cachedUnixTime=null;return this},fromData:function(b,a){if(b)for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&"icaltype"!==d&&(this[d]=b[d]);a&&(this.zone=a);!b||"isDate"in b?b&&"isDate"in b&&(this.isDate=b.isDate):this.isDate=!("hour"in b);b&&"timezone"in b&&(this.zone=ICAL.TimezoneService.get(b.timezone)||ICAL.Timezone.localTimezone);b&&"zone"in b&&(this.zone=b.zone);this.zone||(this.zone=ICAL.Timezone.localTimezone);this._cachedUnixTime=
null;return this},dayOfWeek:function(){var b=(this.year<<9)+(this.month<<5)+this.day;if(b in ICAL.Time._dowCache)return ICAL.Time._dowCache[b];var a=this.year-(3>this.month?1:0),d=this.day+a+ICAL.helpers.trunc(26*(this.month+(3>this.month?12:0)+1)/10)+ICAL.helpers.trunc(a/4),d=d+(6*ICAL.helpers.trunc(a/100)+ICAL.helpers.trunc(a/400)),d=(d+6)%7+1;return ICAL.Time._dowCache[b]=d},dayOfYear:function(){var b=ICAL.Time.isLeapYear(this.year)?1:0;return ICAL.Time.daysInYearPassedMonth[b][this.month-1]+this.day},
startOfWeek:function(b){b=b||ICAL.Time.SUNDAY;var a=this.clone();a.day-=(this.dayOfWeek()+7-b)%7;a.isDate=!0;a.hour=0;a.minute=0;a.second=0;return a},endOfWeek:function(b){b=b||ICAL.Time.SUNDAY;var a=this.clone();a.day+=(7-this.dayOfWeek()+b-ICAL.Time.SUNDAY)%7;a.isDate=!0;a.hour=0;a.minute=0;a.second=0;return a},startOfMonth:function(){var b=this.clone();b.day=1;b.isDate=!0;b.hour=0;b.minute=0;b.second=0;return b},endOfMonth:function(){var b=this.clone();b.day=ICAL.Time.daysInMonth(b.month,b.year);
b.isDate=!0;b.hour=0;b.minute=0;b.second=0;return b},startOfYear:function(){var b=this.clone();b.day=1;b.month=1;b.isDate=!0;b.hour=0;b.minute=0;b.second=0;return b},endOfYear:function(){var b=this.clone();b.day=31;b.month=12;b.isDate=!0;b.hour=0;b.minute=0;b.second=0;return b},startDoyWeek:function(b){b=b||ICAL.Time.SUNDAY;b=this.dayOfWeek()-b;0>b&&(b+=7);return this.dayOfYear()-b},getDominicalLetter:function(){return ICAL.Time.getDominicalLetter(this.year)},nthWeekDay:function(b,a){var d=ICAL.Time.daysInMonth(this.month,
this.year),c,f=a,g=0;c=this.clone();0<=f?(c.day=1,0!=f&&f--,g=c.day,d=c.dayOfWeek(),d=b-d,0>d&&(d+=7),g=g+d-b,c=b):(c.day=d,c=c.dayOfWeek(),f++,c-=b,0>c&&(c+=7),c=d-c);return g+(c+7*f)},isNthWeekDay:function(b,a){var d=this.dayOfWeek();return 0===a&&d===b||this.nthWeekDay(b,a)===this.day?!0:!1},weekNumber:function(b){var a=(this.year<<12)+(this.month<<8)+(this.day<<3)+b;if(a in ICAL.Time._wnCache)return ICAL.Time._wnCache[a];var d,c=this.clone();c.isDate=!0;var f=this.year;12==c.month&&25<c.day?(d=
ICAL.Time.weekOneStarts(f+1,b),0>c.compare(d)&&(d=ICAL.Time.weekOneStarts(f,b))):(d=ICAL.Time.weekOneStarts(f,b),0>c.compare(d)&&(d=ICAL.Time.weekOneStarts(--f,b)));b=c.subtractDate(d).toSeconds()/86400;b=ICAL.helpers.trunc(b/7)+1;return ICAL.Time._wnCache[a]=b},addDuration:function(b){var a=b.isNegative?-1:1,d=this.second,c=this.minute,f=this.hour,g=this.day,d=d+a*b.seconds,c=c+a*b.minutes,f=f+a*b.hours,g=g+a*b.days,g=g+7*a*b.weeks;this.second=d;this.minute=c;this.hour=f;this.day=g;this._cachedUnixTime=
null},subtractDate:function(b){var a=this.toUnixTime()+this.utcOffset();b=b.toUnixTime()+b.utcOffset();return ICAL.Duration.fromSeconds(a-b)},subtractDateTz:function(b){var a=this.toUnixTime();b=b.toUnixTime();return ICAL.Duration.fromSeconds(a-b)},compare:function(b){var a=this.toUnixTime();b=b.toUnixTime();return a>b?1:b>a?-1:0},compareDateOnlyTz:function(b,a){var d=this.convertToZone(a),c=b.convertToZone(a),f=0;return 0!=(f=ICAL.Time._cmp_attr(d,c,"year"))||0!=(f=ICAL.Time._cmp_attr(d,c,"month"))?
f:f=ICAL.Time._cmp_attr(d,c,"day")},convertToZone:function(b){var a=this.clone(),d=this.zone.tzid==b.tzid;this.isDate||d||ICAL.Timezone.convert_time(a,this.zone,b);a.zone=b;return a},utcOffset:function(){return this.zone==ICAL.Timezone.localTimezone||this.zone==ICAL.Timezone.utcTimezone?0:this.zone.utcOffset(this)},toICALString:function(){var b=this.toString();return 10<b.length?ICAL.design.icalendar.value["date-time"].toICAL(b):ICAL.design.icalendar.value.date.toICAL(b)},toString:function(){var b=
this.year+"-"+ICAL.helpers.pad2(this.month)+"-"+ICAL.helpers.pad2(this.day);this.isDate||(b+="T"+ICAL.helpers.pad2(this.hour)+":"+ICAL.helpers.pad2(this.minute)+":"+ICAL.helpers.pad2(this.second),this.zone===ICAL.Timezone.utcTimezone&&(b+="Z"));return b},toJSDate:function(){return this.zone==ICAL.Timezone.localTimezone?this.isDate?new Date(this.year,this.month-1,this.day):new Date(this.year,this.month-1,this.day,this.hour,this.minute,this.second,0):new Date(1E3*this.toUnixTime())},_normalize:function(){this._time.isDate&&
(this._time.hour=0,this._time.minute=0,this._time.second=0);this.adjust(0,0,0,0);return this},adjust:function(b,a,d,c,f){var g=0,h=0;f=f||this._time;f.isDate||(c=f.second+c,f.second=c%60,c=ICAL.helpers.trunc(c/60),0>f.second&&(f.second+=60,c--),d=f.minute+d+c,f.minute=d%60,d=ICAL.helpers.trunc(d/60),0>f.minute&&(f.minute+=60,d--),a=f.hour+a+d,f.hour=a%24,g=ICAL.helpers.trunc(a/24),0>f.hour&&(f.hour+=24,g--));12<f.month?h=ICAL.helpers.trunc((f.month-1)/12):1>f.month&&(h=ICAL.helpers.trunc(f.month/
12)-1);f.year+=h;f.month-=12*h;b=f.day+b+g;if(0<b)for(;;){h=ICAL.Time.daysInMonth(f.month,f.year);if(b<=h)break;f.month++;12<f.month&&(f.year++,f.month=1);b-=h}else for(;0>=b;)1==f.month?(f.year--,f.month=12):f.month--,b+=ICAL.Time.daysInMonth(f.month,f.year);f.day=b;this._cachedUnixTime=null;return this},fromUnixTime:function(b){this.zone=ICAL.Timezone.utcTimezone;var a=ICAL.Time.epochTime.clone();a.adjust(0,0,0,b);this.year=a.year;this.month=a.month;this.day=a.day;this.hour=a.hour;this.minute=a.minute;
this.second=Math.floor(a.second);this._cachedUnixTime=null},toUnixTime:function(){if(null!==this._cachedUnixTime)return this._cachedUnixTime;var b=this.utcOffset();return this._cachedUnixTime=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second-b)/1E3},toJSON:function(){for(var b="year month day hour minute second isDate".split(" "),a=Object.create(null),d=0,c=b.length,f;d<c;d++)f=b[d],a[f]=this[f];this.zone&&(a.timezone=this.zone.tzid);return a}};(function(){function b(a){Object.defineProperty(ICAL.Time.prototype,
a,{get:function(){this._pendingNormalization&&(this._normalize(),this._pendingNormalization=!1);return this._time[a]},set:function(b){this._cachedUnixTime=null;this._pendingNormalization=!0;return this._time[a]=b}})}"defineProperty"in Object&&(b("year"),b("month"),b("day"),b("hour"),b("minute"),b("second"),b("isDate"))})();ICAL.Time.daysInMonth=function(b,a){var d=30;if(1>b||12<b)return d;d=[0,31,28,31,30,31,30,31,31,30,31,30,31][b];2==b&&(d+=ICAL.Time.isLeapYear(a));return d};ICAL.Time.isLeapYear=
function(b){return 1752>=b?0==b%4:0==b%4&&0!=b%100||0==b%400};ICAL.Time.fromDayOfYear=function(b,a){var d=a,c=b,f=new ICAL.Time;f.auto_normalize=!1;var g=ICAL.Time.isLeapYear(d)?1:0;if(1>c)return d--,g=ICAL.Time.isLeapYear(d)?1:0,c+=ICAL.Time.daysInYearPassedMonth[g][12],ICAL.Time.fromDayOfYear(c,d);if(c>ICAL.Time.daysInYearPassedMonth[g][12])return g=ICAL.Time.isLeapYear(d)?1:0,c-=ICAL.Time.daysInYearPassedMonth[g][12],d++,ICAL.Time.fromDayOfYear(c,d);f.year=d;f.isDate=!0;for(d=11;0<=d;d--)if(c>
ICAL.Time.daysInYearPassedMonth[g][d]){f.month=d+1;f.day=c-ICAL.Time.daysInYearPassedMonth[g][d];break}f.auto_normalize=!0;return f};ICAL.Time.fromStringv2=function(b){return new ICAL.Time({year:parseInt(b.substr(0,4),10),month:parseInt(b.substr(5,2),10),day:parseInt(b.substr(8,2),10),isDate:!0})};ICAL.Time.fromDateString=function(b){return new ICAL.Time({year:ICAL.helpers.strictParseInt(b.substr(0,4)),month:ICAL.helpers.strictParseInt(b.substr(5,2)),day:ICAL.helpers.strictParseInt(b.substr(8,2)),
isDate:!0})};ICAL.Time.fromDateTimeString=function(b,a){if(19>b.length)throw Error('invalid date-time value: "'+b+'"');var d;b[19]&&"Z"===b[19]?d="Z":a&&(d=a.getParameter("tzid"));return new ICAL.Time({year:ICAL.helpers.strictParseInt(b.substr(0,4)),month:ICAL.helpers.strictParseInt(b.substr(5,2)),day:ICAL.helpers.strictParseInt(b.substr(8,2)),hour:ICAL.helpers.strictParseInt(b.substr(11,2)),minute:ICAL.helpers.strictParseInt(b.substr(14,2)),second:ICAL.helpers.strictParseInt(b.substr(17,2)),timezone:d})};
ICAL.Time.fromString=function(b){return 10<b.length?ICAL.Time.fromDateTimeString(b):ICAL.Time.fromDateString(b)};ICAL.Time.fromJSDate=function(b,a){return(new ICAL.Time).fromJSDate(b,a)};ICAL.Time.fromData=function(b,a){return(new ICAL.Time).fromData(b,a)};ICAL.Time.now=function(){return ICAL.Time.fromJSDate(new Date,!1)};ICAL.Time.weekOneStarts=function(b,a){var d=ICAL.Time.fromData({year:b,month:1,day:1,isDate:!0}),c=d.dayOfWeek(),f=a||ICAL.Time.DEFAULT_WEEK_START;c>ICAL.Time.THURSDAY&&(d.day+=
7);f>ICAL.Time.THURSDAY&&(d.day-=7);d.day-=c-f;return d};ICAL.Time.getDominicalLetter=function(b){var a=(b+(b/4|0)+(b/400|0)-(b/100|0)-1)%7;return ICAL.Time.isLeapYear(b)?"GFEDCBA"[(a+6)%7]+"GFEDCBA"[a]:"GFEDCBA"[a]};ICAL.Time.epochTime=ICAL.Time.fromData({year:1970,month:1,day:1,hour:0,minute:0,second:0,isDate:!1,timezone:"Z"});ICAL.Time._cmp_attr=function(b,a,d){return b[d]>a[d]?1:b[d]<a[d]?-1:0};ICAL.Time.daysInYearPassedMonth=[[0,31,59,90,120,151,181,212,243,273,304,334,365],[0,31,60,91,121,152,
182,213,244,274,305,335,366]];ICAL.Time.SUNDAY=1;ICAL.Time.MONDAY=2;ICAL.Time.TUESDAY=3;ICAL.Time.WEDNESDAY=4;ICAL.Time.THURSDAY=5;ICAL.Time.FRIDAY=6;ICAL.Time.SATURDAY=7;ICAL.Time.DEFAULT_WEEK_START=ICAL.Time.MONDAY})();
(function(){ICAL.VCardTime=function(b,a,d){this.wrappedJSObject=this;var c=this._time=Object.create(null);c.year=null;c.month=null;c.day=null;c.hour=null;c.minute=null;c.second=null;this.icaltype=d||"date-and-or-time";this.fromData(b,a)};ICAL.helpers.inherits(ICAL.Time,ICAL.VCardTime,{icalclass:"vcardtime",icaltype:"date-and-or-time",zone:null,clone:function(){return new ICAL.VCardTime(this._time,this.zone,this.icaltype)},_normalize:function(){return this},utcOffset:function(){return this.zone instanceof
ICAL.UtcOffset?this.zone.toSeconds():ICAL.Time.prototype.utcOffset.apply(this,arguments)},toICALString:function(){return ICAL.design.vcard.value[this.icaltype].toICAL(this.toString())},toString:function(){var b=ICAL.helpers.pad2,a=this.year,d=this.month,c=this.day,f=this.hour,g=this.minute,h=this.second,k=null!==d,m=null!==c,n=null!==f,l=null!==g,p=null!==h,a=(null!==a?b(a)+(k||m?"-":""):k||m?"--":"")+(k?b(d):"")+(m?"-"+b(c):""),b=(n?b(f):"-")+(n&&l?":":"")+(l?b(g):"")+(n||l?"":"-")+(l&&p?":":"")+
(p?b(h):""),f=this.zone===ICAL.Timezone.utcTimezone?"Z":this.zone instanceof ICAL.UtcOffset?this.zone.toString():this.zone===ICAL.Timezone.localTimezone?"":this.zone instanceof ICAL.Timezone?ICAL.UtcOffset.fromSeconds(this.zone.utcOffset(this)).toString():"";switch(this.icaltype){case "time":return b+f;case "date-and-or-time":case "date-time":return a+("--"==b?"":"T"+b+f);case "date":return a}return null}});ICAL.VCardTime.fromDateAndOrTimeString=function(b,a){function d(a,b,d){return a?ICAL.helpers.strictParseInt(a.substr(b,
d)):null}var c=b.split("T"),f=c[0],g=(c=c[1])?ICAL.design.vcard.value.time._splitZone(c):[],c=g[0],g=g[1],h=f?f.length:0,k=g?g.length:0,m=f&&"-"==f[0]&&"-"==f[1],n=g&&"-"==g[0],f={year:m?null:d(f,0,4),month:!m||4!=h&&7!=h?7==h?d(f,5,2):10==h?d(f,5,2):null:d(f,2,2),day:5==h?d(f,3,2):7==h&&m?d(f,5,2):10==h?d(f,8,2):null,hour:n?null:d(g,0,2),minute:n&&3==k?d(g,1,2):4<k?n?d(g,1,2):d(g,3,2):null,second:4==k?d(g,2,2):6==k?d(g,4,2):8==k?d(g,6,2):null},c="Z"==c?ICAL.Timezone.utcTimezone:c&&":"==c[3]?ICAL.UtcOffset.fromString(c):
null;return new ICAL.VCardTime(f,c,a)}})();
(function(){function b(a,b,d,c){var f=c;"+"===c[0]&&(f=c.substr(1));f=ICAL.helpers.strictParseInt(f);if(void 0!==b&&c<b)throw Error(a+': invalid value "'+c+'" must be > '+b);if(void 0!==d&&c>d)throw Error(a+': invalid value "'+c+'" must be < '+b);return f}var a={SU:ICAL.Time.SUNDAY,MO:ICAL.Time.MONDAY,TU:ICAL.Time.TUESDAY,WE:ICAL.Time.WEDNESDAY,TH:ICAL.Time.THURSDAY,FR:ICAL.Time.FRIDAY,SA:ICAL.Time.SATURDAY},d={},c;for(c in a)a.hasOwnProperty(c)&&(d[a[c]]=c);ICAL.Recur=function(a){this.wrappedJSObject=
this;this.parts={};a&&"object"===typeof a&&this.fromData(a)};ICAL.Recur.prototype={parts:null,interval:1,wkst:ICAL.Time.MONDAY,until:null,count:null,freq:null,icalclass:"icalrecur",icaltype:"recur",iterator:function(a){return new ICAL.RecurIterator({rule:this,dtstart:a})},clone:function(){return new ICAL.Recur(this.toJSON())},isFinite:function(){return!(!this.count&&!this.until)},isByCount:function(){return!(!this.count||this.until)},addComponent:function(a,b){var d=a.toUpperCase();d in this.parts?
this.parts[d].push(b):this.parts[d]=[b]},setComponent:function(a,b){this.parts[a.toUpperCase()]=b.slice()},getComponent:function(a){a=a.toUpperCase();return a in this.parts?this.parts[a].slice():[]},getNextOccurrence:function(a,b){var d=this.iterator(a),c;do c=d.next();while(c&&0>=c.compare(b));c&&b.zone&&(c.zone=b.zone);return c},fromData:function(a){for(var b in a){var d=b.toUpperCase();d in m?Array.isArray(a[b])?this.parts[d]=a[b]:this.parts[d]=[a[b]]:this[b]=a[b]}this.wkst&&"number"!=typeof this.wkst&&
(this.wkst=ICAL.Recur.icalDayToNumericDay(this.wkst));!this.until||this.until instanceof ICAL.Time||(this.until=ICAL.Time.fromString(this.until))},toJSON:function(){var a=Object.create(null);a.freq=this.freq;this.count&&(a.count=this.count);1<this.interval&&(a.interval=this.interval);for(var b in this.parts)if(this.parts.hasOwnProperty(b)){var d=this.parts[b];Array.isArray(d)&&1==d.length?a[b.toLowerCase()]=d[0]:a[b.toLowerCase()]=ICAL.helpers.clone(this.parts[b])}this.until&&(a.until=this.until.toString());
"wkst"in this&&this.wkst!==ICAL.Time.DEFAULT_WEEK_START&&(a.wkst=ICAL.Recur.numericDayToIcalDay(this.wkst));return a},toString:function(){var a="FREQ="+this.freq;this.count&&(a+=";COUNT="+this.count);1<this.interval&&(a+=";INTERVAL="+this.interval);for(var b in this.parts)this.parts.hasOwnProperty(b)&&(a+=";"+b+"="+this.parts[b]);this.until&&(a+=";UNTIL="+this.until.toString());"wkst"in this&&this.wkst!==ICAL.Time.DEFAULT_WEEK_START&&(a+=";WKST="+ICAL.Recur.numericDayToIcalDay(this.wkst));return a}};
ICAL.Recur.icalDayToNumericDay=function(b){return a[b]};ICAL.Recur.numericDayToIcalDay=function(a){return d[a]};var f=/^(SU|MO|TU|WE|TH|FR|SA)$/,g=/^([+-])?(5[0-3]|[1-4][0-9]|[1-9])?(SU|MO|TU|WE|TH|FR|SA)$/,h="SECONDLY MINUTELY HOURLY DAILY WEEKLY MONTHLY YEARLY".split(" "),k={FREQ:function(a,b,d){if(-1!==h.indexOf(a))b.freq=a;else throw Error('invalid frequency "'+a+'" expected: "'+h.join(", ")+'"');},COUNT:function(a,b,d){b.count=ICAL.helpers.strictParseInt(a)},INTERVAL:function(a,b,d){b.interval=
ICAL.helpers.strictParseInt(a);1>b.interval&&(b.interval=1)},UNTIL:function(a,b,d){b.until=d?10<a.length?ICAL.design.icalendar.value["date-time"].fromICAL(a):ICAL.design.icalendar.value.date.fromICAL(a):ICAL.Time.fromString(a)},WKST:function(a,b,d){if(f.test(a))b.wkst=ICAL.Recur.icalDayToNumericDay(a);else throw Error('invalid WKST value "'+a+'"');}},m={BYSECOND:b.bind(this,"BYSECOND",0,60),BYMINUTE:b.bind(this,"BYMINUTE",0,59),BYHOUR:b.bind(this,"BYHOUR",0,23),BYDAY:function(a){if(g.test(a))return a;
throw Error('invalid BYDAY value "'+a+'"');},BYMONTHDAY:b.bind(this,"BYMONTHDAY",-31,31),BYYEARDAY:b.bind(this,"BYYEARDAY",-366,366),BYWEEKNO:b.bind(this,"BYWEEKNO",-53,53),BYMONTH:b.bind(this,"BYMONTH",0,12),BYSETPOS:b.bind(this,"BYSETPOS",-366,366)};ICAL.Recur.fromString=function(a){a=ICAL.Recur._stringToData(a,!1);return new ICAL.Recur(a)};ICAL.Recur.fromData=function(a){return new ICAL.Recur(a)};ICAL.Recur._stringToData=function(a,b){for(var d=Object.create(null),c=a.split(";"),f=c.length,g=0;g<
f;g++){var h=c[g].split("="),u=h[0].toUpperCase(),v=h[0].toLowerCase(),x=b?v:u,h=h[1];if(u in m){for(var v=h.split(","),h=0,y=v.length;h<y;h++)v[h]=m[u](v[h]);d[x]=1==v.length?v[0]:v}else if(u in k)k[u](h,d,b);else d[v]=h}return d}})();
ICAL.RecurIterator=function(){function b(a){this.fromData(a)}b.prototype={completed:!1,rule:null,dtstart:null,last:null,occurrence_number:0,by_indices:null,initialized:!1,by_data:null,days:null,days_index:0,fromData:function(a){this.rule=ICAL.helpers.formatClassType(a.rule,ICAL.Recur);if(!this.rule)throw Error("iterator requires a (ICAL.Recur) rule");this.dtstart=ICAL.helpers.formatClassType(a.dtstart,ICAL.Time);if(!this.dtstart)throw Error("iterator requires a (ICAL.Time) dtstart");this.by_data=
a.by_data?a.by_data:ICAL.helpers.clone(this.rule.parts,!0);a.occurrence_number&&(this.occurrence_number=a.occurrence_number);this.days=a.days||[];a.last&&(this.last=ICAL.helpers.formatClassType(a.last,ICAL.Time));this.by_indices=a.by_indices;this.by_indices||(this.by_indices={BYSECOND:0,BYMINUTE:0,BYHOUR:0,BYDAY:0,BYMONTH:0,BYWEEKNO:0,BYMONTHDAY:0});(this.initialized=a.initialized||!1)||this.init()},init:function(){this.initialized=!0;this.last=this.dtstart.clone();var a=this.by_data;"BYDAY"in a&&
this.sort_byday_rules(a.BYDAY,this.rule.wkst);if("BYYEARDAY"in a&&("BYMONTH"in a||"BYWEEKNO"in a||"BYMONTHDAY"in a||"BYDAY"in a))throw Error("Invalid BYYEARDAY rule");if("BYWEEKNO"in a&&"BYMONTHDAY"in a)throw Error("BYWEEKNO does not fit to BYMONTHDAY");if("MONTHLY"==this.rule.freq&&("BYYEARDAY"in a||"BYWEEKNO"in a))throw Error("For MONTHLY recurrences neither BYYEARDAY nor BYWEEKNO may appear");if("WEEKLY"==this.rule.freq&&("BYYEARDAY"in a||"BYMONTHDAY"in a))throw Error("For WEEKLY recurrences neither BYMONTHDAY nor BYYEARDAY may appear");
if("YEARLY"!=this.rule.freq&&"BYYEARDAY"in a)throw Error("BYYEARDAY may only appear in YEARLY rules");this.last.second=this.setup_defaults("BYSECOND","SECONDLY",this.dtstart.second);this.last.minute=this.setup_defaults("BYMINUTE","MINUTELY",this.dtstart.minute);this.last.hour=this.setup_defaults("BYHOUR","HOURLY",this.dtstart.hour);this.last.day=this.setup_defaults("BYMONTHDAY","DAILY",this.dtstart.day);this.last.month=this.setup_defaults("BYMONTH","MONTHLY",this.dtstart.month);if("WEEKLY"==this.rule.freq)if("BYDAY"in
a){var b=this.ruleDayOfWeek(a.BYDAY[0]),a=b[0],b=b[1],a=b-this.last.dayOfWeek();if(this.last.dayOfWeek()<b&&0<=a||0>a)this.last.day+=a}else b=ICAL.Recur.numericDayToIcalDay(this.dtstart.dayOfWeek()),a.BYDAY=[b];if("YEARLY"==this.rule.freq){for(;;){this.expand_year_days(this.last.year);if(0<this.days.length)break;this.increment_year(this.rule.interval)}this._nextByYearDay()}if("MONTHLY"==this.rule.freq&&this.has_by_data("BYDAY")){var c=null,f=this.last.clone(),g=ICAL.Time.daysInMonth(this.last.month,
this.last.year),h;for(h in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(h)){this.last=f.clone();var b=this.ruleDayOfWeek(this.by_data.BYDAY[h]),a=b[0],b=b[1],k=this.last.nthWeekDay(b,a);if(6<=a||-6>=a)throw Error("Malformed values in BYDAY part");if(k>g||0>=k){if(c&&c.month==f.month)continue;for(;k>g||0>=k;)this.increment_month(),g=ICAL.Time.daysInMonth(this.last.month,this.last.year),k=this.last.nthWeekDay(b,a)}this.last.day=k;if(!c||0>this.last.compare(c))c=this.last.clone()}this.last=
c.clone();this.has_by_data("BYMONTHDAY")&&this._byDayAndMonthDay(!0);if(this.last.day>g||0==this.last.day)throw Error("Malformed values in BYDAY part");}else this.has_by_data("BYMONTHDAY")&&0>this.last.day&&(g=ICAL.Time.daysInMonth(this.last.month,this.last.year),this.last.day=g+this.last.day+1)},next:function(){var a=this.last?this.last.clone():null;if(this.rule.count&&this.occurrence_number>=this.rule.count||this.rule.until&&0<this.last.compare(this.rule.until))return this.completed=!0,null;if(0==
this.occurrence_number&&0<=this.last.compare(this.dtstart))return this.occurrence_number++,this.last;var b;do switch(b=1,this.rule.freq){case "SECONDLY":this.next_second();break;case "MINUTELY":this.next_minute();break;case "HOURLY":this.next_hour();break;case "DAILY":this.next_day();break;case "WEEKLY":this.next_week();break;case "MONTHLY":b=this.next_month();break;case "YEARLY":this.next_year();break;default:return null}while(!this.check_contracting_rules()||0>this.last.compare(this.dtstart)||!b);
if(0==this.last.compare(a))throw Error("Same occurrence found twice, protecting you from death by recursion");if(this.rule.until&&0<this.last.compare(this.rule.until))return this.completed=!0,null;this.occurrence_number++;return this.last},next_second:function(){return this.next_generic("BYSECOND","SECONDLY","second","minute")},increment_second:function(a){return this.increment_generic(a,"second",60,"minute")},next_minute:function(){return this.next_generic("BYMINUTE","MINUTELY","minute","hour","next_second")},
increment_minute:function(a){return this.increment_generic(a,"minute",60,"hour")},next_hour:function(){return this.next_generic("BYHOUR","HOURLY","hour","monthday","next_minute")},increment_hour:function(a){this.increment_generic(a,"hour",24,"monthday")},next_day:function(){var a="DAILY"==this.rule.freq;if(0==this.next_hour())return 0;a?this.increment_monthday(this.rule.interval):this.increment_monthday(1);return 0},next_week:function(){var a=0;if(0==this.next_weekday_by_week())return a;this.has_by_data("BYWEEKNO")?
(++this.by_indices.BYWEEKNO,this.by_indices.BYWEEKNO==this.by_data.BYWEEKNO.length&&(this.by_indices.BYWEEKNO=0,a=1),this.last.month=1,this.last.day=1,this.last.day+=7*this.by_data.BYWEEKNO[this.by_indices.BYWEEKNO],a&&this.increment_year(1)):this.increment_monthday(7*this.rule.interval);return a},normalizeByMonthDayRules:function(a,b,c){a=ICAL.Time.daysInMonth(b,a);b=[];for(var f=0,g=c.length,h;f<g;f++)if(h=c[f],!(Math.abs(h)>a)){if(0>h)h=a+(h+1);else if(0===h)continue;-1===b.indexOf(h)&&b.push(h)}return b.sort(function(a,
b){return a-b})},_byDayAndMonthDay:function(a){function b(){p=ICAL.Time.daysInMonth(q.last.month,q.last.year);f=q.normalizeByMonthDayRules(q.last.year,q.last.month,q.by_data.BYMONTHDAY);for(m=f.length;f[k]<=r&&(!a||f[k]!=r)&&k<m-1;)k++}function c(){r=0;q.increment_month();k=0;b()}var f,g=this.by_data.BYDAY,h,k=0,m,n=g.length,l=0,p,q=this,r=this.last.day;b();a&&--r;for(var t=48;!l&&t;)if(t--,h=r+1,h>p)c();else{var w=f[k++];if(w>=h){r=w;for(h=0;h<n;h++){var u=this.ruleDayOfWeek(g[h]),w=u[0],u=u[1];
this.last.day=r;if(this.last.isNthWeekDay(u,w)){l=1;break}}l||k!==m||c()}else c()}if(0>=t)throw Error("Malformed values in BYDAY combined with BYMONTHDAY parts");return l},next_month:function(){var a=1;if(0==this.next_hour())return a;if(this.has_by_data("BYDAY")&&this.has_by_data("BYMONTHDAY"))a=this._byDayAndMonthDay();else if(this.has_by_data("BYDAY")){var b=ICAL.Time.daysInMonth(this.last.month,this.last.year),c=0,f=0;if(this.has_by_data("BYSETPOS")){for(var a=this.last.day,g=1;g<=b;g++)this.last.day=
g,this.is_day_in_byday(this.last)&&(f++,g<=a&&c++);this.last.day=a}a=0;for(g=this.last.day+1;g<=b;g++)if(this.last.day=g,this.is_day_in_byday(this.last)&&(!this.has_by_data("BYSETPOS")||this.check_set_position(++c)||this.check_set_position(c-f-1))){a=1;break}if(g>b)if(this.last.day=1,this.increment_month(),this.is_day_in_byday(this.last)){if(!this.has_by_data("BYSETPOS")||this.check_set_position(1))a=1}else a=0}else this.has_by_data("BYMONTHDAY")?(this.by_indices.BYMONTHDAY++,this.by_indices.BYMONTHDAY>=
this.by_data.BYMONTHDAY.length&&(this.by_indices.BYMONTHDAY=0,this.increment_month()),b=ICAL.Time.daysInMonth(this.last.month,this.last.year),g=this.by_data.BYMONTHDAY[this.by_indices.BYMONTHDAY],0>g&&(g=b+g+1),g>b?(this.last.day=1,a=this.is_day_in_byday(this.last)):this.last.day=g):(this.increment_month(),b=ICAL.Time.daysInMonth(this.last.month,this.last.year),this.by_data.BYMONTHDAY[0]>b?a=0:this.last.day=this.by_data.BYMONTHDAY[0]);return a},next_weekday_by_week:function(){var a=0;if(0==this.next_hour())return a;
if(!this.has_by_data("BYDAY"))return 1;for(;;){var b=new ICAL.Time;this.by_indices.BYDAY++;this.by_indices.BYDAY==Object.keys(this.by_data.BYDAY).length&&(this.by_indices.BYDAY=0,a=1);var c=this.ruleDayOfWeek(this.by_data.BYDAY[this.by_indices.BYDAY])[1],c=c-this.rule.wkst;0>c&&(c+=7);b.year=this.last.year;b.month=this.last.month;b.day=this.last.day;b=b.startDoyWeek(this.rule.wkst);if(!(1>c+b)||a)return c=ICAL.Time.fromDayOfYear(b+c,this.last.year),this.last.year=c.year,this.last.month=c.month,this.last.day=
c.day,a}},next_year:function(){if(0==this.next_hour())return 0;if(++this.days_index==this.days.length){this.days_index=0;do this.increment_year(this.rule.interval),this.expand_year_days(this.last.year);while(0==this.days.length)}this._nextByYearDay();return 1},_nextByYearDay:function(){var a=this.days[this.days_index],b=this.last.year;1>a&&(a+=1,b+=1);a=ICAL.Time.fromDayOfYear(a,b);this.last.day=a.day;this.last.month=a.month},ruleDayOfWeek:function(a){if(a=a.match(/([+-]?[0-9])?(MO|TU|WE|TH|FR|SA|SU)/)){var b=
parseInt(a[1]||0,10);a=ICAL.Recur.icalDayToNumericDay(a[2]);return[b,a]}return[0,0]},next_generic:function(a,b,c,f,g){var h=a in this.by_data;b=this.rule.freq==b;var k=0;if(g&&0==this[g]())return k;if(h)this.by_indices[a]++,g=this.by_data[a],this.by_indices[a]==g.length&&(this.by_indices[a]=0,k=1),this.last[c]=g[this.by_indices[a]];else if(b)this["increment_"+c](this.rule.interval);if(h&&k&&b)this["increment_"+f](1);return k},increment_monthday:function(a){for(var b=0;b<a;b++){var c=ICAL.Time.daysInMonth(this.last.month,
this.last.year);this.last.day++;this.last.day>c&&(this.last.day-=c,this.increment_month())}},increment_month:function(){this.last.day=1;if(this.has_by_data("BYMONTH"))this.by_indices.BYMONTH++,this.by_indices.BYMONTH==this.by_data.BYMONTH.length&&(this.by_indices.BYMONTH=0,this.increment_year(1)),this.last.month=this.by_data.BYMONTH[this.by_indices.BYMONTH];else{"MONTHLY"==this.rule.freq?this.last.month+=this.rule.interval:this.last.month++;this.last.month--;var a=ICAL.helpers.trunc(this.last.month/
12);this.last.month%=12;this.last.month++;0!=a&&this.increment_year(a)}},increment_year:function(a){this.last.year+=a},increment_generic:function(a,b,c,f){this.last[b]+=a;a=ICAL.helpers.trunc(this.last[b]/c);this.last[b]%=c;if(0!=a)this["increment_"+f](a)},has_by_data:function(a){return a in this.rule.parts},expand_year_days:function(a){var b=new ICAL.Time;this.days=[];var c={},f=["BYDAY","BYWEEKNO","BYMONTHDAY","BYMONTH","BYYEARDAY"],g;for(g in f)if(f.hasOwnProperty(g)){var h=f[g];h in this.rule.parts&&
(c[h]=this.rule.parts[h])}if("BYMONTH"in c&&"BYWEEKNO"in c){f=1;g={};b.year=a;b.isDate=!0;for(h=0;h<this.by_data.BYMONTH.length;h++){var k=this.by_data.BYMONTH[h];b.month=k;b.day=1;h=b.weekNumber(this.rule.wkst);b.day=ICAL.Time.daysInMonth(k,a);for(k=b.weekNumber(this.rule.wkst);h<k;h++)g[h]=1}for(k=0;k<this.by_data.BYWEEKNO.length&&f;k++)h=this.by_data.BYWEEKNO[k],f=52>h?f&g[k]:0;f?delete c.BYMONTH:delete c.BYWEEKNO}f=Object.keys(c).length;if(0==f)a=this.dtstart.clone(),a.year=this.last.year,this.days.push(a.dayOfYear());
else if(1==f&&"BYMONTH"in c)for(var m in this.by_data.BYMONTH)this.by_data.BYMONTH.hasOwnProperty(m)&&(b=this.dtstart.clone(),b.year=a,b.month=this.by_data.BYMONTH[m],b.isDate=!0,this.days.push(b.dayOfYear()));else if(1==f&&"BYMONTHDAY"in c)for(var n in this.by_data.BYMONTHDAY){if(this.by_data.BYMONTHDAY.hasOwnProperty(n)){m=this.dtstart.clone();var l=this.by_data.BYMONTHDAY[n];if(0>l)var p=ICAL.Time.daysInMonth(m.month,a),l=l+p+1;m.day=l;m.year=a;m.isDate=!0;this.days.push(m.dayOfYear())}}else if(2==
f&&"BYMONTHDAY"in c&&"BYMONTH"in c)for(m in this.by_data.BYMONTH){if(this.by_data.BYMONTH.hasOwnProperty(m))for(n in c=this.by_data.BYMONTH[m],p=ICAL.Time.daysInMonth(c,a),this.by_data.BYMONTHDAY)this.by_data.BYMONTHDAY.hasOwnProperty(n)&&(l=this.by_data.BYMONTHDAY[n],0>l&&(l=l+p+1),b.day=l,b.month=c,b.year=a,b.isDate=!0,this.days.push(b.dayOfYear()))}else if(!(1==f&&"BYWEEKNO"in c||2==f&&"BYWEEKNO"in c&&"BYMONTHDAY"in c))if(1==f&&"BYDAY"in c)this.days=this.days.concat(this.expand_by_day(a));else if(2==
f&&"BYDAY"in c&&"BYMONTH"in c){for(m in this.by_data.BYMONTH)if(this.by_data.BYMONTH.hasOwnProperty(m))if(k=this.by_data.BYMONTH[m],p=ICAL.Time.daysInMonth(k,a),b.year=a,b.month=this.by_data.BYMONTH[m],b.day=1,b.isDate=!0,c=b.dayOfWeek(),n=b.dayOfYear()-1,b.day=p,f=b.dayOfWeek(),this.has_by_data("BYSETPOS")){c=[];for(g=1;g<=p;g++)b.day=g,this.is_day_in_byday(b)&&c.push(g);for(p=0;p<c.length;p++)(this.check_set_position(p+1)||this.check_set_position(p-c.length))&&this.days.push(n+c[p])}else for(l in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(l))if(h=
this.ruleDayOfWeek(this.by_data.BYDAY[l]),g=h[0],k=h[1],h=(k+7-c)%7+1,k=p-(f+7-k)%7,0==g)for(g=h;g<=p;g+=7)this.days.push(n+g);else 0<g?(g=h+7*(g-1),g<=p&&this.days.push(n+g)):(g=k+7*(g+1),0<g&&this.days.push(n+g));this.days.sort(function(a,b){return a-b})}else if(2==f&&"BYDAY"in c&&"BYMONTHDAY"in c)for(p in m=this.expand_by_day(a),m)m.hasOwnProperty(p)&&(g=m[p],b=ICAL.Time.fromDayOfYear(g,a),0<=this.by_data.BYMONTHDAY.indexOf(b.day)&&this.days.push(g));else if(3==f&&"BYDAY"in c&&"BYMONTHDAY"in c&&
"BYMONTH"in c)for(p in m=this.expand_by_day(a),m)m.hasOwnProperty(p)&&(g=m[p],b=ICAL.Time.fromDayOfYear(g,a),0<=this.by_data.BYMONTH.indexOf(b.month)&&0<=this.by_data.BYMONTHDAY.indexOf(b.day)&&this.days.push(g));else if(2==f&&"BYDAY"in c&&"BYWEEKNO"in c)for(p in m=this.expand_by_day(a),m)m.hasOwnProperty(p)&&(g=m[p],b=ICAL.Time.fromDayOfYear(g,a),h=b.weekNumber(this.rule.wkst),this.by_data.BYWEEKNO.indexOf(h)&&this.days.push(g));else 3==f&&"BYDAY"in c&&"BYWEEKNO"in c&&"BYMONTHDAY"in c||(this.days=
1==f&&"BYYEARDAY"in c?this.days.concat(this.by_data.BYYEARDAY):[]);return 0},expand_by_day:function(a){var b=[],c=this.last.clone();c.year=a;c.month=1;c.day=1;c.isDate=!0;a=c.dayOfWeek();c.month=12;c.day=31;c.isDate=!0;var f=c.dayOfWeek(),c=c.dayOfYear(),g;for(g in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(g)){var h=this.ruleDayOfWeek(this.by_data.BYDAY[g]),k=h[0],h=h[1];if(0==k)for(k=(h+7-a)%7+1;k<=c;k+=7)b.push(k);else 0<k?b.push((h>=a?h-a+1:h-a+8)+7*(k-1)):(k=-k,b.push((h<=f?c-f+
h:c-f+h-7)-7*(k-1)))}return b},is_day_in_byday:function(a){for(var b in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(b)){var c=this.ruleDayOfWeek(this.by_data.BYDAY[b]),f=c[0],c=c[1],g=a.dayOfWeek();if(0==f&&c==g||a.nthWeekDay(c,f)==a.day)return 1}return 0},check_set_position:function(a){return this.has_by_data("BYSETPOS")?-1!==this.by_data.BYSETPOS.indexOf(a):!1},sort_byday_rules:function(a,b){for(var c=0;c<a.length;c++)for(var f=0;f<c;f++){var g=this.ruleDayOfWeek(a[f])[1],h=this.ruleDayOfWeek(a[c])[1],
g=g-b,h=h-b;0>g&&(g+=7);0>h&&(h+=7);g>h&&(g=a[c],a[c]=a[f],a[f]=g)}},check_contract_restriction:function(a,d){var c=b._expandMap[this.rule.freq][b._indexMap[a]],f=!1;if(a in this.by_data&&c==b.CONTRACT){var c=this.by_data[a],g;for(g in c)if(c.hasOwnProperty(g)&&c[g]==d){f=!0;break}}else f=!0;return f},check_contracting_rules:function(){var a=this.last.dayOfWeek(),b=this.last.weekNumber(this.rule.wkst),c=this.last.dayOfYear();return this.check_contract_restriction("BYSECOND",this.last.second)&&this.check_contract_restriction("BYMINUTE",
this.last.minute)&&this.check_contract_restriction("BYHOUR",this.last.hour)&&this.check_contract_restriction("BYDAY",ICAL.Recur.numericDayToIcalDay(a))&&this.check_contract_restriction("BYWEEKNO",b)&&this.check_contract_restriction("BYMONTHDAY",this.last.day)&&this.check_contract_restriction("BYMONTH",this.last.month)&&this.check_contract_restriction("BYYEARDAY",c)},setup_defaults:function(a,d,c){return b._expandMap[this.rule.freq][b._indexMap[a]]!=b.CONTRACT&&(a in this.by_data||(this.by_data[a]=
[c]),this.rule.freq!=d)?this.by_data[a][0]:c},toJSON:function(){var a=Object.create(null);a.initialized=this.initialized;a.rule=this.rule.toJSON();a.dtstart=this.dtstart.toJSON();a.by_data=this.by_data;a.days=this.days;a.last=this.last.toJSON();a.by_indices=this.by_indices;a.occurrence_number=this.occurrence_number;return a}};b._indexMap={BYSECOND:0,BYMINUTE:1,BYHOUR:2,BYDAY:3,BYMONTHDAY:4,BYYEARDAY:5,BYWEEKNO:6,BYMONTH:7,BYSETPOS:8};b._expandMap={SECONDLY:[1,1,1,1,1,1,1,1],MINUTELY:[2,1,1,1,1,1,
1,1],HOURLY:[2,2,1,1,1,1,1,1],DAILY:[2,2,2,1,1,1,1,1],WEEKLY:[2,2,2,2,3,3,1,1],MONTHLY:[2,2,2,2,2,3,3,1],YEARLY:[2,2,2,2,2,2,2,2]};b.UNKNOWN=0;b.CONTRACT=1;b.EXPAND=2;b.ILLEGAL=3;return b}();
ICAL.RecurExpansion=function(){function b(a){return ICAL.helpers.formatClassType(a,ICAL.Time)}function a(a,b){return a.compare(b)}function d(a){this.ruleDates=[];this.exDates=[];this.fromData(a)}d.prototype={complete:!1,ruleIterators:null,ruleDates:null,exDates:null,ruleDateInc:0,exDateInc:0,exDate:null,ruleDate:null,dtstart:null,last:null,fromData:function(a){var d=ICAL.helpers.formatClassType(a.dtstart,ICAL.Time);if(d)this.dtstart=d;else throw Error(".dtstart (ICAL.Time) must be given");if(a.component)this._init(a.component);
else{this.last=b(a.last)||d.clone();if(!a.ruleIterators)throw Error(".ruleIterators or .component must be given");this.ruleIterators=a.ruleIterators.map(function(a){return ICAL.helpers.formatClassType(a,ICAL.RecurIterator)});this.ruleDateInc=a.ruleDateInc;this.exDateInc=a.exDateInc;a.ruleDates&&(this.ruleDates=a.ruleDates.map(b),this.ruleDate=this.ruleDates[this.ruleDateInc]);a.exDates&&(this.exDates=a.exDates.map(b),this.exDate=this.exDates[this.exDateInc]);"undefined"!==typeof a.complete&&(this.complete=
a.complete)}},next:function(){for(var a,b,d=0;;){if(500<d++)throw Error("max tries have occured, rule may be impossible to forfill.");b=this.ruleDate;a=this._nextRecurrenceIter(this.last);if(!b&&!a){this.complete=!0;break}if(!b||a&&0<b.compare(a.last))b=a.last.clone(),a.next();this.ruleDate===b&&this._nextRuleDay();this.last=b;if(this.exDate&&(a=this.exDate.compare(this.last),0>a&&this._nextExDay(),0===a)){this._nextExDay();continue}return this.last}},toJSON:function(){function a(b){return b.toJSON()}
var b=Object.create(null);b.ruleIterators=this.ruleIterators.map(a);this.ruleDates&&(b.ruleDates=this.ruleDates.map(a));this.exDates&&(b.exDates=this.exDates.map(a));b.ruleDateInc=this.ruleDateInc;b.exDateInc=this.exDateInc;b.last=this.last.toJSON();b.dtstart=this.dtstart.toJSON();b.complete=this.complete;return b},_extractDates:function(b,d){function g(b){l=ICAL.helpers.binsearchInsert(h,b,a);h.splice(l,0,b)}for(var h=[],k=b.getAllProperties(d),m=k.length,n=0,l;n<m;n++)k[n].getValues().forEach(g);
return h},_init:function(b){this.ruleIterators=[];this.last=this.dtstart.clone();if(b.hasProperty("rdate")||b.hasProperty("rrule")||b.hasProperty("recurrence-id")){b.hasProperty("rdate")&&(this.ruleDates=this._extractDates(b,"rdate"),this.ruleDates[0]&&0>this.ruleDates[0].compare(this.dtstart)?(this.ruleDateInc=0,this.last=this.ruleDates[0].clone()):this.ruleDateInc=ICAL.helpers.binsearchInsert(this.ruleDates,this.last,a),this.ruleDate=this.ruleDates[this.ruleDateInc]);if(b.hasProperty("rrule"))for(var d=
b.getAllProperties("rrule"),g=0,h=d.length,k;g<h;g++)k=d[g].getFirstValue(),k=k.iterator(this.dtstart),this.ruleIterators.push(k),k.next();b.hasProperty("exdate")&&(this.exDates=this._extractDates(b,"exdate"),this.exDateInc=ICAL.helpers.binsearchInsert(this.exDates,this.last,a),this.exDate=this.exDates[this.exDateInc])}else this.ruleDate=this.last.clone(),this.complete=!0},_nextExDay:function(){this.exDate=this.exDates[++this.exDateInc]},_nextRuleDay:function(){this.ruleDate=this.ruleDates[++this.ruleDateInc]},
_nextRecurrenceIter:function(){var a=this.ruleIterators;if(0===a.length)return null;for(var b=a.length,d,h,k=0,m;k<b;k++)if(d=a[k],h=d.last,d.completed)b--,0!==k&&k--,a.splice(k,1);else if(!m||0<m.last.compare(h))m=d;return m}};return d}();
ICAL.Event=function(){function b(a,b){a instanceof ICAL.Component||(b=a,a=null);this.component=a?a:new ICAL.Component("vevent");this._rangeExceptionCache=Object.create(null);this.exceptions=Object.create(null);this.rangeExceptions=[];b&&b.strictExceptions&&(this.strictExceptions=b.strictExceptions);b&&b.exceptions&&b.exceptions.forEach(this.relateException,this)}function a(a,b){return a[0]>b[0]?1:b[0]>a[0]?-1:0}b.prototype={THISANDFUTURE:"THISANDFUTURE",exceptions:null,strictExceptions:!1,relateException:function(b){if(this.isRecurrenceException())throw Error("cannot relate exception to exceptions");
b instanceof ICAL.Component&&(b=new ICAL.Event(b));if(this.strictExceptions&&b.uid!==this.uid)throw Error("attempted to relate unrelated exception");var c=b.recurrenceId.toString();this.exceptions[c]=b;b.modifiesFuture()&&(b=[b.recurrenceId.toUnixTime(),c],c=ICAL.helpers.binsearchInsert(this.rangeExceptions,b,a),this.rangeExceptions.splice(c,0,b))},modifiesFuture:function(){return this.component.getFirstPropertyValue("range")===this.THISANDFUTURE},findRangeException:function(b){if(!this.rangeExceptions.length)return null;
b=b.toUnixTime();var c=ICAL.helpers.binsearchInsert(this.rangeExceptions,[b],a);--c;if(0>c)return null;c=this.rangeExceptions[c];return b<c[0]?null:c[1]},getOccurrenceDetails:function(a){var b=a.toString(),f=a.convertToZone(ICAL.Timezone.utcTimezone).toString(),g={recurrenceId:a};if(b in this.exceptions)a=g.item=this.exceptions[b],g.startDate=a.startDate,g.endDate=a.endDate,g.item=a;else if(f in this.exceptions)a=this.exceptions[f],g.startDate=a.startDate,g.endDate=a.endDate,g.item=a;else if(f=this.findRangeException(a)){b=
this.exceptions[f];g.item=b;var h=this._rangeExceptionCache[f];if(!h){var h=b.recurrenceId.clone(),k=b.startDate.clone();h.zone=k.zone;h=k.subtractDate(h);this._rangeExceptionCache[f]=h}a=a.clone();a.zone=b.startDate.zone;a.addDuration(h);f=a.clone();f.addDuration(b.duration);g.startDate=a;g.endDate=f}else f=a.clone(),f.addDuration(this.duration),g.endDate=f,g.startDate=a,g.item=this;return g},iterator:function(a){return new ICAL.RecurExpansion({component:this.component,dtstart:a||this.startDate})},
isRecurring:function(){var a=this.component;return a.hasProperty("rrule")||a.hasProperty("rdate")},isRecurrenceException:function(){return this.component.hasProperty("recurrence-id")},getRecurrenceTypes:function(){for(var a=this.component.getAllProperties("rrule"),b=0,f=a.length,g=Object.create(null);b<f;b++){var h=a[b].getFirstValue();g[h.freq]=!0}return g},get uid(){return this._firstProp("uid")},set uid(a){this._setProp("uid",a)},get startDate(){return this._firstProp("dtstart")},set startDate(a){this._setTime("dtstart",
a)},get endDate(){var a=this._firstProp("dtend");if(!a){var b=this._firstProp("duration"),a=this.startDate.clone();b?a.addDuration(b):a.isDate&&(a.day+=1)}return a},set endDate(a){this._setTime("dtend",a)},get duration(){var a=this._firstProp("duration");return a?a:this.endDate.subtractDate(this.startDate)},get location(){return this._firstProp("location")},set location(a){return this._setProp("location",a)},get attendees(){return this.component.getAllProperties("attendee")},get summary(){return this._firstProp("summary")},
set summary(a){this._setProp("summary",a)},get description(){return this._firstProp("description")},set description(a){this._setProp("description",a)},get organizer(){return this._firstProp("organizer")},set organizer(a){this._setProp("organizer",a)},get sequence(){return this._firstProp("sequence")},set sequence(a){this._setProp("sequence",a)},get recurrenceId(){return this._firstProp("recurrence-id")},set recurrenceId(a){this._setProp("recurrence-id",a)},_setTime:function(a,b){var f=this.component.getFirstProperty(a);
f||(f=new ICAL.Property(a),this.component.addProperty(f));b.zone===ICAL.Timezone.localTimezone||b.zone===ICAL.Timezone.utcTimezone?f.removeParameter("tzid"):f.setParameter("tzid",b.zone.tzid);f.setValue(b)},_setProp:function(a,b){this.component.updatePropertyWithValue(a,b)},_firstProp:function(a){return this.component.getFirstPropertyValue(a)},toString:function(){return this.component.toString()}};return b}();
ICAL.ComponentParser=function(){function b(a){"undefined"===typeof a&&(a={});for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}b.prototype={parseEvent:!0,parseTimezone:!0,oncomplete:function(){},onerror:function(a){},ontimezone:function(a){},onevent:function(a){},process:function(a){"string"===typeof a&&(a=ICAL.parse(a));a instanceof ICAL.Component||(a=new ICAL.Component(a));a=a.getAllSubcomponents();for(var b=0,c=a.length,f;b<c;b++)switch(f=a[b],f.name){case "vtimezone":if(this.parseTimezone){var g=
f.getFirstPropertyValue("tzid");if(g)this.ontimezone(new ICAL.Timezone({tzid:g,component:f}))}break;case "vevent":if(this.parseEvent)this.onevent(new ICAL.Event(f))}this.oncomplete()}};return b}();function ical_events(b,a,d){jcal_events(ICAL.parse(b),a,d)}function jcal_events(b,a,d){b=$jscomp.makeIterator((new ICAL.Component(b)).getAllSubcomponents("vevent"));for(var c=b.next();!c.done;c=b.next())event=c.value,event.hasProperty("rrule")?d(event):a(event)}
function event_duration(b){return(new Date(b.getFirstPropertyValue("dtend").toJSDate()-b.getFirstPropertyValue("dtstart").toJSDate())).getTime()}function event_dtend(b,a){return(new ICAL.Time).fromJSDate(new Date(b.toJSDate().getTime()+a))}
function expand_recur_event(b,a,d,c){exp=new ICAL.RecurExpansion({component:b,dtstart:b.getFirstPropertyValue("dtstart")});for(duration=event_duration(b);!exp.complete&&exp.next()<d;)exp.last>=a&&(b=new ICAL.Component(b.toJSON()),b.updatePropertyWithValue("dtstart",exp.last),b.updatePropertyWithValue("dtend",event_dtend(exp.last,duration)),c(b))}recur_events=[];function an_filter(b){return b.replace(/[^\w\s]/gi,"")}function moment_icaltime(b,a){return(new ICAL.Time).fromJSDate(b.toDate())}
function expand_recur_events(b,a,d,c){events=[];for(var f=$jscomp.makeIterator(recur_events),g=f.next();!g.done;g=f.next())event=g.value,expand_recur_event(event,moment_icaltime(b,d),moment_icaltime(a,d),function(a){fc_event(a,function(a){events.push(a)},["recur-event"])});c(events)}function fc_events(b){events=[];ical_events(b,function(a){fc_event(a,function(a){events.push(a)})},function(a){recur_events.push(a)});return events}
function fc_event(b,a,d){e={title:b.getFirstPropertyValue("summary"),url:b.getFirstPropertyValue("url"),id:b.getFirstPropertyValue("uid"),className:["event-"+an_filter(b.getFirstPropertyValue("uid"))].concat(d),allDay:!1};try{e.start=b.getFirstPropertyValue("dtstart").toJSDate()}catch(c){console.debug('Undefined "dtstart", vevent skipped.');return}try{e.end=b.getFirstPropertyValue("dtend").toJSDate()}catch(c){e.allDay=!0}a(e)};
